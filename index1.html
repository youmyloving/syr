<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–°—ã—Ä–æ–º–∞–Ω–∏—è ‚Äî –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ñ–µ—Ä–º–µ—Ä—Å–∫–∏–µ —Å—ã—Ä—ã</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#FAF8F5" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --bg-primary: #FAF8F5;
      --bg-secondary: #FFFFFF;
      --bg-tertiary: #F5F0E8;
      --bg-warm: #FFF8F0;
      --accent-gold: #C9A962;
      --accent-honey: #D4A84B;
      --accent-warm: #E8B86D;
      --accent-gradient: linear-gradient(135deg, #C9A962 0%, #E8B86D 50%, #D4A84B 100%);
      --text-primary: #2C2416;
      --text-secondary: #5C4D3C;
      --text-muted: #8B7D6B;
      --border-light: rgba(201, 169, 98, 0.2);
      --shadow-soft: 0 4px 20px rgba(44, 36, 22, 0.06);
      --shadow-elevated: 0 8px 32px rgba(44, 36, 22, 0.1);
      --radius-lg: 20px;
      --radius-md: 16px;
      --radius-sm: 12px;
      --font-main: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    html { scroll-behavior: smooth; }
    
    @media (prefers-reduced-motion: reduce) {
      * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition-duration: 0.01ms !important; }
    }

    body {
      font-family: var(--font-main);
      background: var(--bg-primary);
      color: var(--text-primary);
      -webkit-font-smoothing: antialiased;
      overflow-x: hidden;
    }

    #app {
      max-width: 1200px;
      margin: 0 auto;
      min-height: 100vh;
      padding-bottom: 100px;
    }

    /* Header */
    .header {
      position: sticky;
      top: 0;
      z-index: 100;
      background: rgba(250, 248, 245, 0.85);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      padding: 12px 16px;
    }

    .header-top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 12px;
    }

    .logo {
      font-size: 24px;
      font-weight: 700;
      background: var(--accent-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      border: 2px solid var(--accent-gold);
      overflow: hidden;
      background: var(--bg-warm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      color: var(--accent-gold);
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* Search */
    .search-container {
      position: relative;
      margin-bottom: 12px;
    }

    .search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      background: var(--bg-secondary);
      font-size: 15px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.2s;
    }

    .search-input:focus {
      border-color: var(--accent-gold);
      box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
    }

    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
    }

    /* Categories */
    .categories {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
      scrollbar-width: none;
    }

    .categories::-webkit-scrollbar { display: none; }

    .category-tab {
      padding: 8px 16px;
      border-radius: 999px;
      border: 1px solid var(--border-light);
      background: var(--bg-secondary);
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
    }

    .category-tab.active {
      background: var(--accent-gradient);
      color: white;
      border-color: transparent;
    }

    /* Hits Section */
    .hits-section {
      padding: 20px 16px;
      background: var(--bg-warm);
      margin: 0 -16px 20px;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      padding: 0 16px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .hits-scroll {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding: 4px 16px;
      scrollbar-width: none;
    }

    .hits-scroll::-webkit-scrollbar { display: none; }

    .hit-card {
      flex: 0 0 280px;
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .hit-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-elevated);
    }

    .hit-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background: var(--bg-tertiary);
    }

    .hit-content {
      padding: 16px;
    }

    .hit-badge {
      display: inline-block;
      padding: 4px 12px;
      background: var(--accent-gradient);
      color: white;
      font-size: 12px;
      font-weight: 700;
      border-radius: 999px;
      margin-bottom: 8px;
    }

    .hit-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--text-primary);
    }

    .hit-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-gold);
    }

    /* Product Grid */
    .products-section {
      padding: 0 16px;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    @media (min-width: 768px) {
      .product-grid { grid-template-columns: repeat(3, 1fr); }
    }

    @media (min-width: 1024px) {
      .product-grid { grid-template-columns: repeat(4, 1fr); }
    }

    .product-card {
      background: var(--bg-secondary);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      position: relative;
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-elevated);
    }

    .product-image-wrap {
      position: relative;
      aspect-ratio: 4/3;
      overflow: hidden;
      background: var(--bg-tertiary);
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    .product-badge-hit {
      position: absolute;
      top: 12px;
      left: 12px;
      padding: 6px 12px;
      background: var(--accent-gradient);
      color: white;
      font-size: 11px;
      font-weight: 700;
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .fav-btn {
      position: absolute;
      top: 12px;
      right: 12px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: 1px solid var(--border-light);
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(4px);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      color: var(--text-muted);
      transition: all 0.2s;
    }

    .fav-btn:hover { transform: scale(1.1); }
    .fav-btn.active { color: #e74c3c; border-color: rgba(231, 76, 60, 0.3); }

    .product-info {
      padding: 16px;
    }

    .product-name {
      font-size: 15px;
      font-weight: 600;
      line-height: 1.4;
      margin-bottom: 8px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      color: var(--text-primary);
    }

    .product-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--accent-gold);
    }

    /* Bottom Sheet Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      z-index: 200;
      display: flex;
      align-items: flex-end;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-sheet {
      width: 100%;
      max-height: 90vh;
      background: var(--bg-secondary);
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .modal-overlay.active .modal-sheet {
      transform: translateY(0);
    }

    .modal-handle {
      width: 40px;
      height: 4px;
      background: var(--border-light);
      border-radius: 2px;
      margin: 12px auto;
    }

    .modal-header {
      padding: 0 20px 16px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid var(--border-light);
    }

    .modal-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      border: none;
      background: var(--bg-tertiary);
      color: var(--text-secondary);
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .modal-close:hover { background: var(--border-light); }

    .modal-body {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .modal-image-container {
      position: relative;
      width: 100%;
      height: 300px;
      border-radius: var(--radius-md);
      overflow: hidden;
      margin-bottom: 20px;
      background: var(--bg-tertiary);
    }

    .modal-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: opacity 0.3s;
    }

    .modal-description {
      font-size: 15px;
      line-height: 1.6;
      color: var(--text-secondary);
      margin-bottom: 20px;
    }

    .variant-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 16px;
      overflow-x: auto;
      padding-bottom: 4px;
    }

    .variant-tab {
      padding: 10px 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-light);
      background: var(--bg-primary);
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      white-space: nowrap;
      transition: all 0.2s;
    }

    .variant-tab.active {
      background: var(--accent-gradient);
      color: white;
      border-color: transparent;
    }

    .weight-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }

    .weight-pill {
      padding: 10px 16px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-light);
      background: var(--bg-primary);
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .weight-pill:hover { border-color: var(--accent-gold); }
    .weight-pill.active {
      background: var(--accent-gradient);
      color: white;
      border-color: transparent;
    }

    .weight-slider-container {
      margin-bottom: 24px;
    }

    .weight-slider-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
      color: var(--text-muted);
    }

    .weight-slider {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: var(--bg-tertiary);
      outline: none;
      -webkit-appearance: none;
    }

    .weight-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--accent-gradient);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(201, 169, 98, 0.4);
    }

    .price-display {
      font-size: 32px;
      font-weight: 700;
      color: var(--accent-gold);
      margin-bottom: 8px;
      display: flex;
      align-items: baseline;
      gap: 12px;
    }

    .price-diff {
      font-size: 16px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 24px;
    }

    .btn-fav {
      flex: 0 0 56px;
      height: 56px;
      border-radius: var(--radius-md);
      border: 1px solid var(--border-light);
      background: var(--bg-primary);
      color: var(--text-secondary);
      font-size: 24px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .btn-fav.active { color: #e74c3c; border-color: rgba(231, 76, 60, 0.3); }

    .btn-add {
      flex: 1;
      height: 56px;
      border-radius: var(--radius-md);
      border: none;
      background: var(--accent-gradient);
      color: white;
      font-size: 16px;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 4px 16px rgba(201, 169, 98, 0.4);
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .btn-add:active { transform: scale(0.98); }

    /* Cart Button with Plant Effect */
    .btn-order {
      position: relative;
      width: 100%;
      padding: 18px 32px;
      background: var(--accent-gradient);
      font-size: 16px;
      font-weight: 700;
      color: #FFFFFF;
      border: none;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(201, 169, 98, 0.4), inset 0 1px 0 rgba(255,255,255,0.3);
      cursor: pointer;
      overflow: visible;
      transition: transform 0.2s;
    }

    .btn-order:active { transform: scale(0.98); }

    .btn-order .leaf {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: auto;
      opacity: 0;
      transform: translate(-50%, -50%);
      pointer-events: none;
      z-index: -1;
    }

    .fil-leaf-1 { fill: #E8B86D; }
    .fil-leaf-2 { fill: #D4A84B; fill-rule: nonzero; }
    .fil-leaf-3 { fill: #C9A962; }
    .fil-leaf-4 { fill: #7A9E6E; }
    .fil-leaf-5 { fill: #5C8A5A; }

    .btn-order.animating .icon-1 { animation: growLeaf1 0.8s ease forwards; }
    .btn-order.animating .icon-2 { animation: growLeaf2 0.8s ease 0.1s forwards; }
    .btn-order.animating .icon-3 { animation: growLeaf3 0.8s ease 0.05s forwards; }
    .btn-order.animating .icon-4 { animation: growLeaf4 0.8s ease 0.15s forwards; }
    .btn-order.animating .icon-5 { animation: growLeaf5 0.8s ease 0.2s forwards; }

    @keyframes growLeaf1 {
      0% { width: 0; opacity: 0; top: 50%; transform: translate(-50%, -50%) rotate(0deg); }
      50% { width: 60px; opacity: 1; top: -100%; }
      100% { width: 50px; opacity: 0; top: -150%; transform: translate(-50%, -50%) rotate(10deg); }
    }

    @keyframes growLeaf2 {
      0% { width: 0; opacity: 0; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(0deg); }
      50% { width: 75px; opacity: 1; top: -80%; left: 80%; }
      100% { width: 65px; opacity: 0; top: -120%; left: 90%; transform: translate(-50%, -50%) rotate(-15deg); }
    }

    @keyframes growLeaf3 {
      0% { width: 0; opacity: 0; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(0deg); }
      50% { width: 55px; opacity: 1; top: -60%; left: 20%; }
      100% { width: 45px; opacity: 0; top: -100%; left: 10%; transform: translate(-50%, -50%) rotate(8deg); }
    }

    @keyframes growLeaf4 {
      0% { width: 0; opacity: 0; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(0deg); }
      50% { width: 80px; opacity: 1; top: -120%; left: 30%; }
      100% { width: 70px; opacity: 0; top: -180%; left: 20%; transform: translate(-50%, -50%) rotate(-8deg); }
    }

    @keyframes growLeaf5 {
      0% { width: 0; opacity: 0; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(0deg); }
      50% { width: 85px; opacity: 1; top: -140%; left: 70%; }
      100% { width: 75px; opacity: 0; top: -200%; left: 85%; transform: translate(-50%, -50%) rotate(12deg); }
    }

    /* Loader */
    .loader-overlay {
      position: fixed;
      inset: 0;
      background: rgba(250, 248, 245, 0.95);
      display: none;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .loader-overlay.active { display: flex; }

    .loader-container {
      position: relative;
      height: 100px;
      width: 100px;
    }

    .loader-box {
      width: 20px;
      height: 20px;
      background: var(--accent-gradient);
      border-radius: 4px;
      position: absolute;
      left: 50%;
      top: 50%;
      margin-left: -10px;
      margin-top: -10px;
      animation: fall 1s ease-in-out infinite;
    }

    .loader-box:nth-child(1) { animation-delay: 0s; margin-left: -50px; }
    .loader-box:nth-child(2) { animation-delay: 0.1s; margin-left: -25px; }
    .loader-box:nth-child(3) { animation-delay: 0.2s; margin-left: 0; }
    .loader-box:nth-child(4) { animation-delay: 0.3s; margin-left: 25px; }
    .loader-box:nth-child(5) { animation-delay: 0.4s; margin-left: 50px; }

    @keyframes fall {
      0%, 100% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
      10% { opacity: 1; }
      50% { transform: translateY(0) rotate(180deg); }
      90% { opacity: 1; }
      100% { transform: translateY(100px) rotate(360deg); opacity: 0; }
    }

    .ground {
      width: 120px;
      height: 4px;
      background: var(--border-light);
      border-radius: 2px;
      margin-top: 80px;
    }

    .loader-text {
      margin-top: 24px;
      color: var(--text-secondary);
      font-size: 14px;
    }

    /* Bottom Nav */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border-light);
      padding: 8px 16px calc(8px + env(safe-area-inset-bottom));
      display: flex;
      justify-content: space-around;
      z-index: 50;
      box-shadow: 0 -4px 20px rgba(44, 36, 22, 0.06);
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 16px;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 12px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .nav-item.active { color: var(--accent-gold); }
    .nav-item svg { width: 24px; height: 24px; }

    .nav-badge {
      position: absolute;
      top: 4px;
      right: 8px;
      min-width: 18px;
      height: 18px;
      padding: 0 6px;
      background: var(--accent-gold);
      color: white;
      font-size: 11px;
      font-weight: 700;
      border-radius: 999px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* Cart Styles */
    .cart-item {
      display: flex;
      gap: 12px;
      padding: 16px;
      background: var(--bg-primary);
      border-radius: var(--radius-md);
      margin-bottom: 12px;
    }

    .cart-item-image {
      width: 60px;
      height: 60px;
      border-radius: var(--radius-sm);
      object-fit: cover;
      background: var(--bg-tertiary);
    }

    .cart-item-info { flex: 1; }

    .cart-item-name {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 4px;
      color: var(--text-primary);
    }

    .cart-item-variant {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 8px;
    }

    .cart-item-weights {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 8px;
    }

    .cart-weight-btn {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--border-light);
      background: var(--bg-secondary);
      color: var(--text-secondary);
      font-size: 12px;
      cursor: pointer;
      transition: all 0.2s;
    }

    .cart-weight-btn.active {
      background: var(--accent-gradient);
      color: white;
      border-color: transparent;
    }

    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .qty-btn {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      border: 1px solid var(--border-light);
      background: var(--bg-secondary);
      color: var(--text-primary);
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s;
    }

    .qty-btn:hover { border-color: var(--accent-gold); }

    .cart-item-price {
      font-size: 16px;
      font-weight: 700;
      color: var(--accent-gold);
      margin-left: auto;
    }

    .cart-summary {
      padding: 20px;
      background: var(--bg-warm);
      border-radius: var(--radius-md);
      margin-top: 20px;
    }

    .cart-total {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .cart-total-label {
      font-size: 16px;
      color: var(--text-secondary);
    }

    .cart-total-price {
      font-size: 24px;
      font-weight: 700;
      color: var(--accent-gold);
    }

    .form-group {
      margin-bottom: 16px;
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .form-input, .form-textarea, .form-select {
      width: 100%;
      padding: 12px 16px;
      border: 1px solid var(--border-light);
      border-radius: var(--radius-md);
      background: var(--bg-secondary);
      font-size: 15px;
      color: var(--text-primary);
      outline: none;
      transition: all 0.2s;
    }

    .form-input:focus, .form-textarea:focus, .form-select:focus {
      border-color: var(--accent-gold);
      box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--text-muted);
    }

    .empty-state-icon {
      font-size: 48px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    /* Flying Element Animation */
    .flyer {
      position: fixed;
      z-index: 9999;
      pointer-events: none;
      border-radius: 12px;
      object-fit: cover;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: var(--bg-tertiary); }
    ::-webkit-scrollbar-thumb { background: var(--accent-gold); border-radius: 3px; }
  </style>
</head>
<body>
  <div id="app">
    <!-- Header -->
    <header class="header">
      <div class="header-top">
        <div class="logo">–°—ã—Ä–æ–º–∞–Ω–∏—è</div>
        <div class="user-avatar" id="user-avatar">
          <span>–°</span>
        </div>
      </div>
      
      <div class="search-container">
        <span class="search-icon">üîç</span>
        <input type="text" class="search-input" id="search-input" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é..." />
      </div>

      <div class="categories" id="categories">
        <button class="category-tab active" data-category="all">–í—Å–µ</button>
        <button class="category-tab" data-category="cheese">–°—ã—Ä—ã</button>
        <button class="category-tab" data-category="dairy">–ú–æ–ª–æ—á–∫–∞</button>
        <button class="category-tab" data-category="sweets">–°–ª–∞–¥–æ—Å—Ç–∏</button>
        <button class="category-tab" data-category="bakery">–í—ã–ø–µ—á–∫–∞</button>
      </div>
    </header>

    <!-- Hits Section -->
    <section class="hits-section">
      <div class="section-header">
        <h2 class="section-title">üî• –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</h2>
      </div>
      <div class="hits-scroll" id="hits-scroll">
        <!-- Hits injected by JS -->
      </div>
    </section>

    <!-- Products Grid -->
    <section class="products-section">
      <div class="product-grid" id="product-grid">
        <!-- Products injected by JS -->
      </div>
    </section>
  </div>

  <!-- Product Modal -->
  <div class="modal-overlay" id="product-modal">
    <div class="modal-sheet">
      <div class="modal-handle"></div>
      <div class="modal-header">
        <h3 class="modal-title" id="modal-title">–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞</h3>
        <button class="modal-close" onclick="closeProductModal()">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="modal-image-container">
          <img src="" alt="" class="modal-image" id="modal-image" />
        </div>
        
        <p class="modal-description" id="modal-description"></p>

        <!-- Variant Tabs (for grouped products) -->
        <div class="variant-tabs" id="variant-tabs" style="display: none;"></div>

        <!-- Weight Pills -->
        <div class="weight-pills" id="weight-pills"></div>

        <!-- Weight Slider -->
        <div class="weight-slider-container">
          <div class="weight-slider-label">
            <span>–°–≤–æ–π –≤–µ—Å</span>
            <span id="slider-value">500 –≥</span>
          </div>
          <input type="range" class="weight-slider" id="weight-slider" min="100" max="1000" step="50" value="500">
        </div>

        <div class="price-display">
          <span id="modal-price">0 ‚ÇΩ</span>
          <span class="price-diff" id="price-diff"></span>
        </div>

        <div class="modal-actions">
          <button class="btn-fav" id="modal-fav-btn" onclick="toggleModalFavorite()">‚ô°</button>
          <button class="btn-add" id="add-to-cart-btn" onclick="addToCartWithAnimation()">
            –í –∫–æ—Ä–∑–∏–Ω—É
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Cart Modal -->
  <div class="modal-overlay" id="cart-modal">
    <div class="modal-sheet" style="max-height: 95vh;">
      <div class="modal-handle"></div>
      <div class="modal-header">
        <h3 class="modal-title">–ö–æ—Ä–∑–∏–Ω–∞</h3>
        <button class="modal-close" onclick="closeCartModal()">‚úï</button>
      </div>
      <div class="modal-body" id="cart-body">
        <!-- Cart items injected by JS -->
      </div>
    </div>
  </div>

  <!-- Loader -->
  <div class="loader-overlay" id="loader">
    <div class="loader-container">
      <div class="loader-box"></div>
      <div class="loader-box"></div>
      <div class="loader-box"></div>
      <div class="loader-box"></div>
      <div class="loader-box"></div>
    </div>
    <div class="ground"></div>
    <div class="loader-text">–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑...</div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a class="nav-item active" onclick="showMain()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
        <polyline points="9 22 9 12 15 12 15 22"></polyline>
      </svg>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </a>
    <a class="nav-item" onclick="showFavorites()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path>
      </svg>
      <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
      <span class="nav-badge" id="fav-badge" style="display: none;">0</span>
    </a>
    <a class="nav-item" onclick="openCartModal()">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <circle cx="9" cy="21" r="1"></circle>
        <circle cx="20" cy="21" r="1"></circle>
        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path>
      </svg>
      <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
      <span class="nav-badge" id="cart-badge" style="display: none;">0</span>
    </a>
    <a class="nav-item">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
      <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </a>
  </nav>

  <script>
    // Constants
    const BACKEND = 'https://puzzlebot-webhook-handler1.onrender.com';
    const CURRENCY = 'RUB';
    const ROUND = Math.round;
    const HAPTIC_ENABLED = false;
    const MAX_WEIGHT_GRAMS = 1000;
    const MIN_WEIGHT_GRAMS = 100;
    
    const DISCOUNT_THRESHOLDS = [
      { g: 500, rate: 0.05 },
      { g: 700, rate: 0.10 },
      { g: 1000, rate: 0.15 },
    ];

    const STORAGE_CART_KEY = 'syromania-cart';
    const STORAGE_FAVORITES_KEY = 'syromania-favorites';
    const STORAGE_CHECKOUT_KEY = 'syromania-checkout';

    const DEFAULT_IMG = 'https://static.tildacdn.com/tild3134-3861-4539-a363-646133333238/__.webp';

    // Grouped Products Configuration
    const PRODUCT_VARIANTS = {
      'halloumi-group': {
        displayName: '–•–∞–ª–ª—É–º–∏',
        baseGroup: 'brined',
        variants: [
          { id: 'halloumi', name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', pricePerKg: 1950, img: 'https://static.tildacdn.com/tild3161-6362-4130-b134-623331346238/halloumi.webp', description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏ –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –∏–ª–∏ –≥—Ä–∏–ª–µ ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ö—Ä—É—Å—Ç—è—â–∞—è –∫–æ—Ä–æ—á–∫–∞. –ú–æ–∂–Ω–æ –µ—Å—Ç—å –∏ –±–µ–∑ –æ–±–∂–∞—Ä–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 225, pieceWeightRangeText: '200‚Äì250 –≥' },
          { id: 'halloumi-paprika-oregano', name: '–° –ø–∞–ø—Ä–∏–∫–æ–π', pricePerKg: 2100, img: 'https://static.tildacdn.com/tild3133-6165-4134-b335-396662633262/halloumi-paprika-ore.webp', description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏ –∏–ª–∏ –±–µ–∑ –æ–±–∂–∞—Ä–∫–∏. –°—Ä–µ–¥–∏–∑–µ–º–Ω–æ–º–æ—Ä—Å–∫–∏–µ –Ω–æ—Ç–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 225, pieceWeightRangeText: '200‚Äì250 –≥' },
          { id: 'halloumi-tomato-basil-garlic', name: '–¢–æ–º–∞—Ç-–±–∞–∑–∏–ª–∏–∫', pricePerKg: 2100, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/halloumi-tomato-basil-garlic.webp', description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏, —Ö—Ä—É—Å—Ç—è—â–∞—è –∫–æ—Ä–æ—á–∫–∞. –ú–æ–∂–Ω–æ –µ—Å—Ç—å –∏ –±–µ–∑ –æ–±–∂–∞—Ä–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 225, pieceWeightRangeText: '200‚Äì250 –≥' },
          { id: 'halloumi-tomato-paprika', name: '–° –≤—è–ª–µ–Ω—ã–º–∏ —Ç–æ–º–∞—Ç–∞–º–∏', pricePerKg: 2100, img: 'https://static.tildacdn.com/tild3863-3030-4439-a439-653238303862/halloumi-tomato-papr.webp', description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏, –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä–æ—á–∫–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 225, pieceWeightRangeText: '200‚Äì250 –≥' }
        ]
      },
      'sandesh-group': {
        displayName: '–°–∞–Ω–¥–µ—à',
        baseGroup: 'sweets',
        variants: [
          { id: 'sandesh-orange', name: '–ê–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π', pricePerUnit: 300, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-orange.webp', description: '–ù–µ–∂–Ω—ã–π —Ç–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç, –≤ –∫–æ—Ç–æ—Ä—ã–π –≤–ª—é–±–ª—è—é—Ç—Å—è —Å –ø–µ—Ä–≤–æ–≥–æ —É–∫—É—Å–∞. –°–æ—Å—Ç–∞–≤: —Ü–µ–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ, —Ç—Ä–æ—Å—Ç–Ω–∏–∫–æ–≤—ã–π —Å–∞—Ö–∞—Ä, —Ü–µ–¥—Ä–∞ –∞–ø–µ–ª—å—Å–∏–Ω–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.' },
          { id: 'sandesh-walnut', name: '–° –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º', pricePerUnit: 300, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-walnut.webp', description: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç —Å –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º ‚Äî —Ç–∞–µ—Ç –≤–æ —Ä—Ç—É. –°–æ—Å—Ç–∞–≤: —Ü–µ–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ, —Ç—Ä–æ—Å—Ç–Ω–∏–∫–æ–≤—ã–π —Å–∞—Ö–∞—Ä, –≥—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.' },
          { id: 'sandesh-carob', name: '–° –∫—ç—Ä–æ–±–æ–º', pricePerUnit: 300, img: 'https://static.tildacdn.com/tild6135-6337-4266-b764-613565386238/_.webp', description: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç —Å —à–æ–∫–æ–ª–∞–¥–Ω—ã–º –≤–∫—É—Å–æ–º –±–ª–∞–≥–æ–¥–∞—Ä—è –∫—ç—Ä–æ–±—É –∏ –∫–æ–∫–æ—Å–æ–≤–æ–π —Å—Ç—Ä—É–∂–∫–µ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.' }
        ]
      },
      'panir-group': {
        displayName: '–ü–∞–Ω–∏—Ä',
        baseGroup: 'soft',
        variants: [
          { id: 'panir-classic', name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', pricePerKg: 1450, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-classic.webp', description: '–û—á–µ–Ω—å –Ω–µ–∂–Ω—ã–π, –º—è–≥–∫–∏–π, –º–æ–ª–æ—á–Ω—ã–π –≤–∫—É—Å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
          { id: 'panir-herbs', name: '–° –∑–µ–ª–µ–Ω—å—é', pricePerKg: 1600, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-herbs.webp', description: '–õ—ë–≥–∫–∏–π, —Å–≤–µ–∂–∏–π, –±—É–¥—Ç–æ –≥–ª–æ—Ç–æ–∫ –ø—Ä–æ—Ö–ª–∞–¥–Ω–æ–π –≤–æ–¥—ã –≤ –∂–∞—Ä—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
          { id: 'panir-spicy', name: '–°–æ —Å–ø–µ—Ü–∏—è–º–∏', pricePerKg: 1650, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-spicy.webp', description: '–í–∫—É—Å –Ω–µ –æ—Å—Ç—Ä—ã–π –∏ –Ω–µ –ø–µ—Ä—á—ë–Ω—ã–π. –û—á–µ–Ω—å –Ω–µ–∂–Ω—ã–π, –∞—Ä–æ–º–∞—Ç–Ω—ã–π, –≤—Å–µ —Å–ø–µ—Ü–∏–∏ –ø–æ–¥–æ–±—Ä–∞–Ω—ã –≤ –º–µ—Ä—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
          { id: 'panir-smoked', name: '–ö–æ–ø—á—ë–Ω—ã–π', pricePerKg: 1700, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-smoked.webp', description: '–ü—Ä–∏—è—Ç–Ω—ã–π –∞—Ä–æ–º–∞—Ç –∫–æ–ø—á—ë–Ω–æ—Å—Ç–∏, –≤–∫—É—Å –≥–∞—Ä–º–æ–Ω–∏—á–Ω—ã–π, –±–µ–∑ —Ä–µ–∑–∫–æ—Å—Ç–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 30 —Å—É—Ç–æ–∫.' }
        ]
      }
    };

    // All Products
    const PRODUCTS = [
      { id: 'mozzarella', name: '–ú–æ—Ü–∞—Ä–µ–ª–ª–∞', group: 'cheese', pricePerKg: 2000, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/mozzarella.webp', description: '–ù–∏—Ç–∏ –º–æ—Ü–∞—Ä–µ–ª–ª—ã –≤ –Ω–µ–∂–Ω–æ–π –æ–±–æ–ª–æ—á–∫–µ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫. –ò–¥–µ–∞–ª—å–Ω–∞ –∫ —Å–∞–ª–∞—Ç–∞–º.', pieceWeightGrams: 200, hit: true },
      { id: 'buratta', name: '–ë—É—Ä–∞—Ç—Ç–∞', group: 'cheese', pricePerKg: 2100, img: DEFAULT_IMG, description: '–ú–µ—à–æ—á–µ–∫ –∏–∑ –º–æ—Ü–∞—Ä–µ–ª–ª—ã —Å –Ω–∞—á–∏–Ω–∫–æ–π –∏–∑ —Å—Ç—Ä–∞—á–∞—Ç–µ–ª–ª—ã. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫.', pieceWeightGrams: 250 },
      { id: 'stracciatella', name: '–°—Ç—Ä–∞—á–∞—Ç–µ–ª–ª–∞', group: 'cheese', pricePerKg: 2150, img: 'https://static.tildacdn.com/tild3832-6430-4462-b663-353438383930/stracciatella.webp', description: '–ù–∏—Ç–∏ –º–æ—Ü–∞—Ä–µ–ª–ª—ã –≤ —Å–ª–∏–≤–∫–∞—Ö. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5‚Äì7 —Å—É—Ç–æ–∫.' },
      { id: 'suluguni', name: '–°—É–ª—É–≥—É–Ω–∏', group: 'cheese', pricePerKg: 1700, img: 'https://static.tildacdn.com/tild3238-3866-4366-a436-623236363261/suluguni.webp', description: '–£–º–µ—Ä–µ–Ω–Ω–æ —Å–æ–ª—ë–Ω—ã–π, —Å–ª–æ–∏—Å—Ç—ã–π –∏ —ç–ª–∞—Å—Ç–∏—á–Ω—ã–π. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'suluguni-smoked', name: '–°—É–ª—É–≥—É–Ω–∏ –∫–æ–ø—á—ë–Ω—ã–π', group: 'cheese', pricePerKg: 1800, img: 'https://static.tildacdn.com/tild6435-3838-4463-b431-353765323333/suluguni-smoked.webp', description: '–° –ª—ë–≥–∫–æ–π –∫–æ–ø—á—ë–Ω–æ—Å—Ç—å—é, –ø–ª–æ—Ç–Ω–∞—è –∏ —ç–ª–∞—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 30 —Å—É—Ç–æ–∫.' },
      { id: 'imeretian', name: '–ò–º–µ—Ä–µ—Ç–∏–Ω—Å–∫–∏–π', group: 'cheese', pricePerKg: 1500, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/imeretian.webp', description: '–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Ä–∞—Å—Å–æ–ª—å–Ω—ã–π —Å—ã—Ä, –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ –≤—Å–µ–º –±–ª—é–¥–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'imeretian-dill-garlic', name: '–ò–º–µ—Ä–µ—Ç–∏–Ω—Å–∫–∏–π —Å –∑–µ–ª–µ–Ω—å—é –∏ —á–µ—Å–Ω–æ–∫–æ–º', group: 'cheese', pricePerKg: 1600, img: 'https://static.tildacdn.com/tild6435-3539-4337-a561-386438636230/__.webp', description: '–°–≤–µ–∂–∏–π —Ä–∞—Å—Å–æ–ª—å–Ω—ã–π —Å—ã—Ä —Å –∞—Ä–æ–º–∞—Ç–Ω–æ–π –∑–µ–ª–µ–Ω—å—é –∏ —á–µ—Å–Ω–æ–∫–æ–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'kosichka', name: '–°—ã—Ä –∫–æ—Å–∏—á–∫–∞', group: 'cheese', pricePerKg: 1900, img: DEFAULT_IMG, description: '–°–ª–µ–≥–∫–∞ —Å–æ–ª—ë–Ω—ã–π, –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ –≤—Å–µ–º—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 200 },
      { id: 'kosichka-smoked', name: '–°—ã—Ä –∫–æ—Å–∏—á–∫–∞ –∫–æ–ø—á—ë–Ω–∞—è', group: 'cheese', pricePerKg: 2000, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/kosichka-smoked.webp', description: '–•–æ–ª–æ–¥–Ω–æ–µ –∫–æ–ø—á–µ–Ω–∏–µ, –ª—ë–≥–∫–∞—è —Å–æ–ª—ë–Ω–æ—Å—Ç—å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 30 —Å—É—Ç–æ–∫.', pieceWeightGrams: 200 },
      { id: 'spicy-klubok', name: '–ü—Ä—è–Ω—ã–µ –∫–ª—É–±–æ—á–∫–∏', group: 'cheese', pricePerKg: 1950, img: 'https://static.tildacdn.com/tild3463-6166-4665-a439-323264653939/spicy-klubok.webp', description: '–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–∫—É—Å–Ω—ã–π —Å—ã—Ä, –Ω–µ —Å–∏–ª—å–Ω–æ —Å–æ–ª—ë–Ω—ã–π, –Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Å–µ–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', pieceWeightGrams: 150, hit: true },
      { id: 'ricotta', name: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä (—Ä–∏–∫–æ—Ç—Ç–∞)', group: 'cheese', pricePerKg: 1400, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/ricotta.webp', description: '–ù–µ–∂–Ω—ã–π —Å—ã—Ä, –ø–æ–¥—Ö–æ–¥–∏—Ç –∏ –∫ –±—É—Ç–µ—Ä–±—Ä–æ–¥–∞–º, –∏ –∫ –±–ª—é–¥–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'ricotta-herbs', name: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä —Å –∑–µ–ª–µ–Ω—å—é (—Ä–∏–∫–æ—Ç—Ç–∞)', group: 'cheese', pricePerKg: 1500, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/ricotta-herbs.webp', description: '–ù–µ–∂–Ω—ã–π, —Å–≤–µ–∂–∏–π, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π ‚Äî –ª—É—á—à–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å! –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'caciotta', name: '–ö–∞—á–æ—Ç—Ç–∞', group: 'cheese', pricePerKg: 2200, img: 'https://static.tildacdn.com/tild6165-3265-4834-a236-366661346562/caciotta.webp', description: '–ú—è–≥–∫–∏–π –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —Å—ã—Ä. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'caciotta-fenugreek', name: '–ö–∞—á–æ—Ç—Ç–∞ —Å –ø–∞–∂–∏—Ç–Ω–∏–∫–æ–º', group: 'cheese', pricePerKg: 2250, img: DEFAULT_IMG, description: '–° –æ—Ä–µ—Ö–æ–≤—ã–º –ø—Ä–∏–≤–∫—É—Å–æ–º –ø–∞–∂–∏—Ç–Ω–∏–∫–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'hard-village', name: '–¢–≤—ë—Ä–¥—ã–π –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏–π —Å—ã—Ä', group: 'cheese', pricePerKg: 1600, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/hard-village.webp', description: '–¢–≤—ë—Ä–¥—ã–π –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏–π —Å—ã—Ä –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –ø—Ä–∏–ø—Ä–∞–≤–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–π –æ–±–∂–∞—Ä–∏–≤–∞–µ—Ç—Å—è. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'hard-smoked', name: '–¢–≤—ë—Ä–¥—ã–π –∫–æ–ø—á—ë–Ω—ã–π —Å—ã—Ä', group: 'cheese', pricePerKg: 1800, img: 'https://static.tildacdn.com/tild6662-3930-4663-b132-316135626136/hard-smoked.webp', description: '–ì–æ—Ç–æ–≤–∏—Ç—Å—è –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –ø—Ä–∏–ø—Ä–∞–≤–∞–º–∏, –æ–±–∂–∞—Ä–∏–≤–∞–µ—Ç—Å—è, –∑–∞—Ç–µ–º –∫–æ–ø—Ç–∏—Ç—Å—è. –ù–µ–∂–Ω—ã–π –∫–æ–ø—á—ë–Ω—ã–π –≤–∫—É—Å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 30 —Å—É—Ç–æ–∫.' },
      { id: 'rolls-olives-walnut', name: '–°—ã—Ä–Ω—ã–π —Ä—É–ª–µ—Ç —Å –º–∞—Å–ª–∏–Ω–∞–º–∏ –∏ –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º', group: 'cheese', pricePerKg: 1700, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/rolls-olives-walnut.webp', description: '–ú–æ–∂–Ω–æ –ø–æ–¥–∞—Ç—å –∫–∞–∫ –∑–∞–∫—É—Å–∫—É –∫ –ª—é–±–æ–º—É —Å—Ç–æ–ª—É ‚Äî –¥–æ–º–∞—à–Ω–µ–º—É –∏–ª–∏ –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–º—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'rolls-apricot-cedar', name: '–°—ã—Ä–Ω—ã–π —Ä—É–ª–µ—Ç —Å –∫—É—Ä–∞–≥–æ–π –∏ –∫–µ–¥—Ä–æ–≤—ã–º –æ—Ä–µ—Ö–æ–º', group: 'cheese', pricePerKg: 1700, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/rolls-apricot-cedar.webp', description: '–°–ª–µ–≥–∫–∞ —Å–ª–∞–¥–∫–æ–≤–∞—Ç—ã–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–≤–æ—Ä–æ–∂–Ω–æ–º—É —Å—ã—Ä—É, –∫—É—Ä–∞–≥–µ –∏ –æ—Ä–µ—Ö–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.' },
      { id: 'milk', name: '–ú–æ–ª–æ–∫–æ', group: 'dairy', pricePerL: 150, img: DEFAULT_IMG, description: '–ú–æ–ª–æ–∫–æ –æ—Ç–±–æ—Ä–Ω–æ–µ —Ü–µ–ª—å–Ω–æ–µ, –æ—Ö–ª–∞–∂–¥—ë–Ω–Ω–æ–µ. –ö–∞–∫ –∏–∑ –¥–µ—Ç—Å—Ç–≤–∞! –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'milk-topped', name: '–ú–æ–ª–æ–∫–æ —Ç–æ–ø–ª—ë–Ω–æ–µ', group: 'dairy', pricePerL: 250, img: 'https://static.tildacdn.com/tild3839-3163-4066-a633-306366346631/milk-topped.webp', description: '–ù–∞—Å—Ç–æ—è—â–µ–µ —Ü–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª—ë–Ω–æ–µ –º–æ–ª–æ–∫–æ. –ò–º–µ–µ—Ç –≥—É—Å—Ç–æ–≤–∞—Ç—É—é –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ü–∏—é, –ø–æ–ø—Ä–æ–±–æ–≤–∞–≤ –æ–¥–Ω–∞–∂–¥—ã ‚Äî —É–∂–µ –Ω–µ —Ä–∞–∑–ª—é–±–∏—à—å! –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5‚Äì7 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'yogurt', name: '–ô–æ–≥—É—Ä—Ç', group: 'dairy', pricePerL: 260, img: DEFAULT_IMG, description: '–°–∞–º—ã–π –Ω–∞—Å—Ç–æ—è—â–∏–π –π–æ–≥—É—Ä—Ç, –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ –∏–∑ –æ—Ç–±–æ—Ä–Ω–æ–≥–æ –º–æ–ª–æ–∫–∞ –∏ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω–æ–π –∑–∞–∫–≤–∞—Å–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'ryazhenka', name: '–†—è–∂–µ–Ω–∫–∞', group: 'dairy', pricePerL: 280, img: DEFAULT_IMG, description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Ä—è–∂–µ–Ω–∫–∞ –∏–∑ –º–æ–ª–æ–∫–∞. –û–¥–∏–Ω –∏–∑ –ª—é–±–∏–º—ã—Ö –Ω–∞–ø–∏—Ç–∫–æ–≤ –≤—Å–µ—Ö –¥–µ—Ç–µ–π! –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'misti-dahi', name: '–ú–∏—Å—Ç—Ö–∏-–î–∞—Ö–∏', group: 'dairy', pricePerL: 300, img: DEFAULT_IMG, description: '–ö–∏—Å–ª–æ–º–æ–ª–æ—á–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.' },
      { id: 'whey', name: '–°—ã–≤–æ—Ä–æ—Ç–∫–∞', group: 'dairy', pricePerL: 60, img: DEFAULT_IMG, description: '–ú–æ–ª–æ—á–Ω—ã–π –Ω–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç, –ø–æ–ª—É—á–∞–µ–º—ã–π –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è —Ç–≤–æ—Ä–æ–≥–∞ –∏–ª–∏ —Å—ã—Ä–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'cream', name: '–°–ª–∏–≤–∫–∏ (33‚Äì36%)', group: 'dairy', pricePerL: 1450, img: 'https://static.tildacdn.com/tild3163-3665-4636-a537-303830323163/cream.webp', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Å–≤–µ–∂–∏–µ —Å–ª–∏–≤–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ. –ù–∞ 3‚Äì4 —Å—É—Ç–∫–∏ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å —Å–º–µ—Ç–∞–Ω–æ–π.' },
      { id: 'tvorog', name: '–¢–≤–æ—Ä–æ–≥', group: 'dairy', pricePerKg: 700, img: 'https://static.tildacdn.com/tild3136-3730-4134-b466-613138343764/tvorog.webp', description: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π –Ω–µ–∂–Ω—ã–π –≤–∫—É—Å. ¬´–ó—ë—Ä–Ω—ã—à–∫–∏¬ª —Ç–≤–æ—Ä–æ–≥–∞ –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–∏–µ, –∫–∞–∫–∏–º–∏ –∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'butter', name: '–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ (—à–∞—Ä–∏–∫)', group: 'dairy', pricePerKg: 2100, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/butter.webp', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ, –∫–∞–∫ –≥–æ—Ç–æ–≤–∏–ª–∞ –±–∞–±—É—à–∫–∞. –ë–µ–∑ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–∞—Ö–∞—Ä–∞ –∏–ª–∏ —Å–æ–ª–∏. –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å —à–∞—Ä–∏–∫–∞ ‚Äî 200 –≥.', pieceWeightGrams: 200 },
      { id: 'ghee', name: '–¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ (–ì–•–ò)', group: 'dairy', pricePerKg: 2900, img: DEFAULT_IMG, description: '–°–æ—Å—Ç–∞–≤: —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ. –ñ–∏—Ä–Ω–æ—Å—Ç—å ~99%. –ì–•–ò ‚Äî —Å–∞–º–æ–µ –¥—Ä–∞–≥–æ—Ü–µ–Ω–Ω–æ–µ, —á—Ç–æ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ –º–æ–ª–æ–∫–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∂–∞—Ä–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –±–æ–ª—å—à–µ 10 –ª–µ—Ç.' },
      { id: 'condensed-milk', name: '–í–∞—Ä—ë–Ω–∞—è —Å–≥—É—â—ë–Ω–∫–∞', group: 'dairy', pricePerKg: 1000, img: DEFAULT_IMG, description: '–°–æ—Å—Ç–∞–≤: —Ü–µ–ª—å–Ω–æ–µ –º–æ–ª–æ–∫–æ, —Ç—Ä–æ—Å—Ç–Ω–∏–∫–æ–≤—ã–π —Å–∞—Ö–∞—Ä. –ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –≤–∞—Ä—ë–Ω–∞—è —Å–≥—É—â—ë–Ω–∫–∞, –≥—É—Å—Ç–∞—è –∏ –∫–∞—Ä–∞–º–µ–ª—å–Ω–∞—è. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'tvorozhnaya-massa', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –º–∞—Å—Å–∞', group: 'dairy', pricePerKg: 850, img: 'https://static.tildacdn.com/tild6630-3237-4430-b461-313634376333/tvorozhnaya-massa_.webp', description: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –º–∞—Å—Å–∞ —Å –∏–∑—é–º–æ–º, —Ñ–∏–Ω–∏–∫–∞–º–∏, —á–µ—Ä–Ω–æ—Å–ª–∏–≤–æ–º –∏–ª–∏ –∫—É—Ä–∞–≥–æ–π. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.', flavors: ['–° –∏–∑—é–º–æ–º', '–° —Ñ–∏–Ω–∏–∫–∞–º–∏', '–° —á–µ—Ä–Ω–æ—Å–ª–∏–≤–æ–º', '–° –∫—É—Ä–∞–≥–æ–π'] },
      { id: 'barfi-classic', name: '–ë—É—Ä—Ñ–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π (–Ω–∞–±–æ—Ä)', group: 'sweets', pricePerUnit: 350, img: 'https://static.tildacdn.com/tild3430-3231-4562-b164-366638313434/barfi-classic.webp', description: '–ù–µ–∂–Ω—ã–π –º–æ–ª–æ—á–Ω—ã–π –¥–µ—Å–µ—Ä—Ç. –í –Ω–∞–±–æ—Ä–µ 5 —à—Ç.', hit: true },
      { id: 'barfi-hazelnut', name: '–ë—É—Ä—Ñ–∏ —Å —Ñ—É–Ω–¥—É–∫–æ–º (–Ω–∞–±–æ—Ä)', group: 'sweets', pricePerUnit: 350, img: 'https://static.tildacdn.com/tild3065-3332-4466-a536-353130343264/barfi-hazelnut.webp', description: '–ë—É—Ä—Ñ–∏ —Å —Ñ—É–Ω–¥—É–∫–æ–º, 5 —à—Ç –≤ –Ω–∞–±–æ—Ä–µ.' },
      { id: 'barfi-sesame', name: '–ë—É—Ä—Ñ–∏ –∫—É–Ω–∂—É—Ç–Ω—ã–π (–Ω–∞–±–æ—Ä)', group: 'sweets', pricePerUnit: 490, img: 'https://static.tildacdn.com/tild3439-6135-4861-a531-316233303166/_.webp', description: '–ë—É—Ä—Ñ–∏ —Å –∫—É–Ω–∂—É—Ç–æ–º, 7 —à—Ç –≤ –Ω–∞–±–æ—Ä–µ.', hit: true },
      { id: 'halva', name: '–•–∞–ª–≤–∞', group: 'sweets', pricePerUnit: 200, img: 'https://static.tildacdn.com/tild3566-6566-4464-b531-306364646164/photo.webp', description: '–°–∞–º–∞—è –Ω–∞—Å—Ç–æ—è—â–∞—è —Ö–∞–ª–≤–∞, —Å–∏–ª—å–Ω–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –º–∞–≥–∞–∑–∏–Ω–Ω–æ–π. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 14 –¥–Ω–µ–π.' },
      { id: 'potato-cake-5', name: '–ü–∏—Ä–æ–∂–Ω–æ–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª (5 —à—Ç)', group: 'sweets', pricePerUnit: 400, img: 'https://static.tildacdn.com/tild3961-6133-4632-b162-396333663962/potato-cake-2.webp', description: '–î–æ–º–∞—à–Ω–∏–µ –ø–∏—Ä–æ–∂–Ω—ã–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª –∏–∑ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π –º—É–∫–∏ –∏ –≤–∞—Ä—ë–Ω–æ–π —Å–≥—É—â—ë–Ω–∫–∏. –í –∫–æ—Ä–æ–±–∫–µ 5 —à—Ç.' },
      { id: 'potato-cake-2', name: '–ü–∏—Ä–æ–∂–Ω–æ–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª (2 —à—Ç)', group: 'sweets', pricePerUnit: 190, img: 'https://static.tildacdn.com/tild3961-6133-4632-b162-396333663962/potato-cake-2.webp', description: '–î–æ–º–∞—à–Ω–∏–µ –ø–∏—Ä–æ–∂–Ω—ã–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª (2 —à—Ç) –∏–∑ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π –º—É–∫–∏ –∏ –≤–∞—Ä—ë–Ω–æ–π —Å–≥—É—â—ë–Ω–∫–∏.' },
      { id: 'cookies-tvorog', name: '–ü–µ—á–µ–Ω—å–µ —Ç–≤–æ—Ä–æ–∂–Ω–æ–µ', group: 'bakery', pricePerKg: 600, img: DEFAULT_IMG, description: '–ú—è–≥–∫–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –ø–µ—á–µ–Ω—å–µ –Ω–∞ —Ç–≤–æ—Ä–æ–≥–µ.' },
      { id: 'cookies-oat', name: '–ü–µ—á–µ–Ω—å–µ –æ–≤—Å—è–Ω–æ–µ', group: 'bakery', pricePerKg: 600, img: DEFAULT_IMG, description: '–û–≤—Å—è–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ –∫ —á–∞—é.' },
      { id: 'cookies-nut', name: '–û—Ä–µ—Ö–æ–≤—ã–µ –ø–∞–ª—å—á–∏–∫–∏', group: 'bakery', pricePerKg: 700, img: 'https://static.tildacdn.com/tild3035-6230-4434-b363-303434366630/cookies-nut.webp', description: '–ü–µ—á–µ–Ω—å–µ —Å –æ—Ä–µ—Ö–∞–º–∏ ‚Äî —Ö—Ä—É—Å—Ç—è—â–∏–µ –ø–∞–ª—å—á–∏–∫–∏.' },
      { id: 'cookies-carob', name: '–ü–µ—á–µ–Ω—å–µ –∫—ç—Ä–æ–±–æ–≤–æ–µ', group: 'bakery', pricePerKg: 600, img: DEFAULT_IMG, description: '–ü–µ—á–µ–Ω—å–µ —Å –∫—ç—Ä–æ–±–æ–º –≤–º–µ—Å—Ç–æ –∫–∞–∫–∞–æ.' },
      { id: 'cookies-sandy', name: '–ü–µ—á–µ–Ω—å–µ –ø–µ—Å–æ—á–Ω–æ–µ', group: 'bakery', pricePerKg: 600, img: DEFAULT_IMG, description: '–†–∞—Å—Å—ã–ø—á–∞—Ç–æ–µ –ø–µ—Å–æ—á–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ.' },
      { id: 'muffin-plain', name: '–ö–µ–∫—Å—ã –æ–±—ã—á–Ω—ã–µ', group: 'bakery', pricePerKg: 500, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω–∏–µ –∫–µ–∫—Å—ã.' },
      { id: 'muffin-carob', name: '–ö–µ–∫—Å—ã —Å –∫—ç—Ä–æ–±–æ–º', group: 'bakery', pricePerKg: 550, img: DEFAULT_IMG, description: '–ö–µ–∫—Å—ã —Å –∫—ç—Ä–æ–±–æ–º.' },
      { id: 'muffin-raisin', name: '–ö–µ–∫—Å—ã —Å –∏–∑—é–º–æ–º', group: 'bakery', pricePerKg: 550, img: 'https://static.tildacdn.com/tild3465-3162-4436-a235-363763383339/muffin-raisin.webp', description: '–ö–µ–∫—Å—ã —Å –∏–∑—é–º–æ–º.' },
      { id: 'casserole-plain', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞', group: 'bakery', pricePerUnit: 260, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω—è—è —Ç–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞ –±–µ–∑ –¥–æ–±–∞–≤–æ–∫.' },
      { id: 'casserole-raisin', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞ —Å –∏–∑—é–º–æ–º', group: 'bakery', pricePerUnit: 260, img: DEFAULT_IMG, description: '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ —Å –∏–∑—é–º–æ–º.' },
      { id: 'crazy-cake', name: '–°—É–º–∞—Å—à–µ–¥—à–∏–π –ø–∏—Ä–æ–≥', group: 'bakery', pricePerUnit: 600, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω–∏–π –ø–∏—Ä–æ–≥ –∫ —á–∞—é.' },
      { id: 'coconut-kuchen-1kg', name: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ 1 –∫–≥', group: 'bakery', pricePerUnit: 1800, img: DEFAULT_IMG, description: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ (—Ñ–æ—Ä–º–∞ ~1 –∫–≥).' },
      { id: 'coconut-kuchen-05kg', name: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ 0.5 –∫–≥', group: 'bakery', pricePerUnit: 1000, img: DEFAULT_IMG, description: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ (—Ñ–æ—Ä–º–∞ ~0.5 –∫–≥).' },
      { id: 'napoleon-1kg', name: '–¢–æ—Ä—Ç ¬´–ù–∞–ø–æ–ª–µ–æ–Ω¬ª 1 –∫–≥', group: 'bakery', pricePerUnit: 1300, img: DEFAULT_IMG, description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ù–∞–ø–æ–ª–µ–æ–Ω (–æ–∫–æ–ª–æ 1 –∫–≥).' },
      { id: 'napoleon-05kg', name: '–¢–æ—Ä—Ç ¬´–ù–∞–ø–æ–ª–µ–æ–Ω¬ª 0.5 –∫–≥', group: 'bakery', pricePerUnit: 750, img: DEFAULT_IMG, description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ù–∞–ø–æ–ª–µ–æ–Ω (–æ–∫–æ–ª–æ 0.5 –∫–≥).' },
      { id: 'apple-pie', name: '–Ø–±–ª–æ—á–Ω—ã–π –ø–∏—Ä–æ–≥', group: 'bakery', pricePerUnit: 560, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω–∏–π —è–±–ª–æ—á–Ω—ã–π –ø–∏—Ä–æ–≥.' },
      { id: 'bliny-10', name: '–ë–ª–∏–Ω—ã (10 —à—Ç)', group: 'bakery', pricePerUnit: 330, img: DEFAULT_IMG, description: '–¢–æ–Ω–∫–∏–µ –±–ª–∏–Ω—á–∏–∫–∏, 10 —à—Ç.' },
      { id: 'bliny-5', name: '–ë–ª–∏–Ω—ã (5 —à—Ç)', group: 'bakery', pricePerUnit: 220, img: DEFAULT_IMG, description: '–¢–æ–Ω–∫–∏–µ –±–ª–∏–Ω—á–∏–∫–∏, 5 —à—Ç.' },
      { id: 'bliny-tvorog-5', name: '–ë–ª–∏–Ω—ã —Å —Ç–≤–æ—Ä–æ–≥–æ–º/–∏–∑—é–º–æ–º (5 —à—Ç)', group: 'bakery', pricePerUnit: 300, img: DEFAULT_IMG, description: '–ë–ª–∏–Ω—ã —Å –Ω–∞—á–∏–Ω–∫–æ–π –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ –∏–ª–∏ —Ç–≤–æ—Ä–æ–≥–∞ —Å –∏–∑—é–º–æ–º.' },
      { id: 'syrniki-10', name: '–°—ã—Ä–Ω–∏–∫–∏ (10 —à—Ç)', group: 'bakery', pricePerUnit: 520, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω–∏–µ —Å—ã—Ä–Ω–∏–∫–∏, 10 —à—Ç.' },
      { id: 'syrniki-5', name: '–°—ã—Ä–Ω–∏–∫–∏ (5 —à—Ç)', group: 'bakery', pricePerUnit: 280, img: DEFAULT_IMG, description: '–î–æ–º–∞—à–Ω–∏–µ —Å—ã—Ä–Ω–∏–∫–∏, 5 —à—Ç.' },
      { id: 'chapati-10', name: '–ß–∞–ø–∞—Ç–∏ (10 —à—Ç)', group: 'bakery', pricePerUnit: 270, img: 'https://static.tildacdn.com/tild6332-6239-4538-b839-356132356236/chapati-10.webp', description: '–°–æ—Å—Ç–∞–≤: –º—É–∫–∞ –ø—à–µ–Ω–∏—á–Ω–∞—è –≤—ã—Å—à–µ–≥–æ —Å–æ—Ä—Ç–∞, —Ä–∂–∞–Ω–∞—è –º—É–∫–∞, –≤–æ–¥–∞, —Å–æ–ª—å, —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 2 —Å—É—Ç–æ–∫ –≤ —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–µ.' },
      { id: 'chapati-wholewheat-10', name: '–ß–∞–ø–∞—Ç–∏ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ (10 —à—Ç)', group: 'bakery', pricePerUnit: 320, img: DEFAULT_IMG, description: '–ß–∞–ø–∞—Ç–∏ –∏–∑ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π –º—É–∫–∏.' }
    ];

    // Hits configuration
    const HITS = [
      { id: 'spicy-klubok', name: '–ü—Ä—è–Ω—ã–π –∫–ª—É–±–æ–∫', reason: '–ë–µ—Å—Ç—Å–µ–ª–ª–µ—Ä' },
      { id: 'halloumi-paprika-oregano', name: '–•–∞–ª–ª—É–º–∏ —Å –ø–∞–ø—Ä–∏–∫–æ–π', reason: '–ù–æ–≤–∏–Ω–∫–∞' },
      { id: 'panir-herbs', name: '–ü–∞–Ω–∏—Ä —Å –∑–µ–ª–µ–Ω—å—é', reason: '–¢–æ–ø' },
      { id: 'sandesh-orange', name: '–°–∞–Ω–¥–µ—à –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π', reason: '–•–∏—Ç' },
      { id: 'barfi-sesame', name: '–ë—É—Ä—Ñ–∏ –∫—É–Ω–∂—É—Ç–Ω—ã–π', reason: '–í—ã–±–æ—Ä –Ω–µ–¥–µ–ª–∏' }
    ];

    // State
    let cart = [];
    let favorites = new Set();
    let currentProduct = null;
    let currentVariant = null;
    let selectedWeight = 500;
    let currentCategory = 'all';

    // Utils
    const fmtRub = (n) => new Intl.NumberFormat('ru-RU', { maximumFractionDigits: 0 }).format(Math.round(n)) + ' ‚ÇΩ';
    const el = (id) => document.getElementById(id);

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      loadState();
      setupTelegram();
      renderHits();
      renderProducts();
      setupEventListeners();
      updateBadges();
    });

    function loadState() {
      try {
        const savedCart = localStorage.getItem(STORAGE_CART_KEY);
        if (savedCart) cart = JSON.parse(savedCart);
        const savedFav = localStorage.getItem(STORAGE_FAVORITES_KEY);
        if (savedFav) favorites = new Set(JSON.parse(savedFav));
      } catch (e) {
        console.error('Error loading state:', e);
      }
    }

    function saveState() {
      try {
        localStorage.setItem(STORAGE_CART_KEY, JSON.stringify(cart));
        localStorage.setItem(STORAGE_FAVORITES_KEY, JSON.stringify([...favorites]));
      } catch (e) {
        console.error('Error saving state:', e);
      }
    }

    function setupTelegram() {
      if (window.Telegram?.WebApp) {
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        // Set user avatar
        const user = tg.initDataUnsafe?.user;
        if (user) {
          const avatar = el('user-avatar');
          if (user.photo_url) {
            avatar.innerHTML = `<img src="${user.photo_url}" alt="">`;
          } else {
            avatar.innerHTML = `<span>${(user.first_name || 'U')[0]}</span>`;
          }
        }
      }
    }

    function setupEventListeners() {
      // Category tabs
      document.querySelectorAll('.category-tab').forEach(tab => {
        tab.addEventListener('click', () => {
          document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          currentCategory = tab.dataset.category;
          renderProducts();
        });
      });

      // Search
      el('search-input').addEventListener('input', (e) => {
        renderProducts(e.target.value);
      });

      // Weight slider
      el('weight-slider').addEventListener('input', (e) => {
        selectedWeight = parseInt(e.target.value);
        el('slider-value').textContent = selectedWeight + ' –≥';
        updateModalPrice();
        updateWeightPills();
      });

      // Close modals on overlay click
      el('product-modal').addEventListener('click', (e) => {
        if (e.target === el('product-modal')) closeProductModal();
      });
      el('cart-modal').addEventListener('click', (e) => {
        if (e.target === el('cart-modal')) closeCartModal();
      });
    }

    function renderHits() {
      const container = el('hits-scroll');
      container.innerHTML = HITS.map(hit => {
        const product = PRODUCTS.find(p => p.id === hit.id) || 
                       Object.values(PRODUCT_VARIANTS).flatMap(g => g.variants).find(v => v.id === hit.id);
        if (!product) return '';
        
        const price = product.pricePerKg ? fmtRub(product.pricePerKg) + '/–∫–≥' : 
                     product.pricePerUnit ? fmtRub(product.pricePerUnit) : '';
        
        return `
          <div class="hit-card" onclick="openProductModal('${hit.id}')">
            <img src="${product.img || DEFAULT_IMG}" class="hit-image" alt="${product.name}">
            <div class="hit-content">
              <span class="hit-badge">${hit.reason}</span>
              <div class="hit-name">${product.name}</div>
              <div class="hit-price">${price}</div>
            </div>
          </div>
        `;
      }).join('');
    }

    function renderProducts(searchTerm = '') {
      const container = el('product-grid');
      let filtered = PRODUCTS.filter(p => {
        const matchesSearch = p.name.toLowerCase().includes(searchTerm.toLowerCase());
        const matchesCategory = currentCategory === 'all' || 
                               (currentCategory === 'cheese' && ['brined', 'soft', 'hard', 'rolls'].includes(p.group)) ||
                               p.group === currentCategory;
        return matchesSearch && matchesCategory;
      });

      // Add grouped products
      if (currentCategory === 'all' || currentCategory === 'cheese') {
        // Halloumi variants
        const halloumiGroup = PRODUCT_VARIANTS['halloumi-group'];
        filtered.push({
          id: 'halloumi-group',
          name: halloumiGroup.displayName,
          group: halloumiGroup.baseGroup,
          isGroup: true,
          variants: halloumiGroup.variants,
          img: halloumiGroup.variants[0].img,
          pricePerKg: halloumiGroup.variants[0].pricePerKg
        });
      }

      if (currentCategory === 'all' || currentCategory === 'sweets') {
        // Sandesh variants
        const sandeshGroup = PRODUCT_VARIANTS['sandesh-group'];
        filtered.push({
          id: 'sandesh-group',
          name: sandeshGroup.displayName,
          group: sandeshGroup.baseGroup,
          isGroup: true,
          variants: sandeshGroup.variants,
          img: sandeshGroup.variants[0].img,
          pricePerUnit: sandeshGroup.variants[0].pricePerUnit
        });
      }

      if (currentCategory === 'all' || currentCategory === 'cheese') {
        // Panir variants
        const panirGroup = PRODUCT_VARIANTS['panir-group'];
        filtered.push({
          id: 'panir-group',
          name: panirGroup.displayName,
          group: panirGroup.baseGroup,
          isGroup: true,
          variants: panirGroup.variants,
          img: panirGroup.variants[0].img,
          pricePerKg: panirGroup.variants[0].pricePerKg
        });
      }

      container.innerHTML = filtered.map(product => {
        const isFav = favorites.has(product.id);
        const priceText = product.pricePerKg ? fmtRub(product.pricePerKg) + '/–∫–≥' : 
                         product.pricePerUnit ? fmtRub(product.pricePerUnit) : 
                         product.pricePerL ? fmtRub(product.pricePerL) + '/–ª' : '';
        
        return `
          <div class="product-card" onclick="openProductModal('${product.id}')">
            <div class="product-image-wrap">
              <img src="${product.img || DEFAULT_IMG}" class="product-image" alt="${product.name}" 
                   onerror="this.src='${DEFAULT_IMG}'">
              ${product.hit ? '<span class="product-badge-hit">–•–ò–¢</span>' : ''}
              <button class="fav-btn ${isFav ? 'active' : ''}" 
                      onclick="event.stopPropagation(); toggleFavorite('${product.id}')"
                      data-id="${product.id}">
                ${isFav ? '‚ô•' : '‚ô°'}
              </button>
            </div>
            <div class="product-info">
              <div class="product-name">${product.name}</div>
              <div class="product-price">${priceText}</div>
            </div>
          </div>
        `;
      }).join('');
    }

    function openProductModal(productId) {
      // Check if it's a grouped product
      let product = PRODUCTS.find(p => p.id === productId);
      let isGroup = false;
      
      if (!product) {
        // Check in variants
        for (const [groupId, group] of Object.entries(PRODUCT_VARIANTS)) {
          const variant = group.variants.find(v => v.id === productId);
          if (variant) {
            product = { ...variant, groupId, isVariant: true };
            isGroup = true;
            break;
          }
        }
      }

      if (!product) return;

      currentProduct = product;
      currentVariant = product;
      
      // Setup modal
      el('modal-title').textContent = product.name;
      el('modal-description').textContent = product.description || '';
      el('modal-image').src = product.img || DEFAULT_IMG;
      
      // Setup variant tabs for groups
      const tabsContainer = el('variant-tabs');
      if (product.isGroup || product.groupId) {
        const group = PRODUCT_VARIANTS[product.groupId || product.id];
        if (group) {
          tabsContainer.style.display = 'flex';
          tabsContainer.innerHTML = group.variants.map((v, idx) => `
            <button class="variant-tab ${v.id === product.id ? 'active' : ''}" 
                    onclick="switchVariant('${group.variants[0].id}', '${v.id}')">
              ${v.name}
            </button>
          `).join('');
        } else {
          tabsContainer.style.display = 'none';
        }
      } else {
        tabsContainer.style.display = 'none';
      }

      // Setup weight pills
      renderWeightPills(product);
      
      // Setup favorite button
      const favBtn = el('modal-fav-btn');
      favBtn.classList.toggle('active', favorites.has(productId));
      favBtn.dataset.id = productId;

      updateModalPrice();
      el('product-modal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function switchVariant(groupId, variantId) {
      // Find the group and variant
      for (const [key, group] of Object.entries(PRODUCT_VARIANTS)) {
        const variant = group.variants.find(v => v.id === variantId);
        if (variant) {
          currentVariant = variant;
          el('modal-title').textContent = variant.name;
          el('modal-description').textContent = variant.description;
          
          // Crossfade image
          const img = el('modal-image');
          img.style.opacity = 0;
          setTimeout(() => {
            img.src = variant.img || DEFAULT_IMG;
            img.style.opacity = 1;
          }, 150);

          // Update tabs
          document.querySelectorAll('.variant-tab').forEach(tab => {
            tab.classList.toggle('active', tab.textContent.includes(variant.name));
          });

          updateModalPrice();
          break;
        }
      }
    }

    function renderWeightPills(product) {
      const container = el('weight-pills');
      const weights = [100, 200, 300, 400, 500, 600, 700, 800, 900, 1000];
      
      if (!product.pricePerKg) {
        container.innerHTML = '';
        el('weight-slider').style.display = 'none';
        return;
      }

      el('weight-slider').style.display = 'block';
      container.innerHTML = weights.map(w => `
        <button class="weight-pill ${w === selectedWeight ? 'active' : ''}" 
                onclick="selectWeight(${w})">
          ${w}–≥
        </button>
      `).join('');
    }

    function selectWeight(weight) {
      selectedWeight = weight;
      el('weight-slider').value = weight;
      el('slider-value').textContent = weight + ' –≥';
      updateWeightPills();
      updateModalPrice();
    }

    function updateWeightPills() {
      document.querySelectorAll('.weight-pill').forEach(pill => {
        const w = parseInt(pill.textContent);
        pill.classList.toggle('active', w === selectedWeight);
      });
    }

    function updateModalPrice() {
      if (!currentVariant) return;
      
      let basePrice = 0;
      let priceText = '';
      let diffText = '';

      if (currentVariant.pricePerKg) {
        basePrice = (selectedWeight / 1000) * currentVariant.pricePerKg;
        priceText = fmtRub(basePrice);
        
        // Calculate discount
        let discountRate = 0;
        for (const threshold of DISCOUNT_THRESHOLDS) {
          if (selectedWeight >= threshold.g) discountRate = threshold.rate;
        }
        
        if (discountRate > 0) {
          const discounted = basePrice * (1 - discountRate);
          priceText = fmtRub(discounted);
          const saved = basePrice - discounted;
          diffText = `‚àí${fmtRub(saved)} (—Å–∫–∏–¥–∫–∞ ${Math.round(discountRate * 100)}%)`;
        }
      } else if (currentVariant.pricePerUnit) {
        basePrice = currentVariant.pricePerUnit;
        priceText = fmtRub(basePrice);
      } else if (currentVariant.pricePerL) {
        basePrice = currentVariant.pricePerL;
        priceText = fmtRub(basePrice);
      }

      el('modal-price').textContent = priceText;
      el('price-diff').textContent = diffText;
    }

    function toggleFavorite(id) {
      if (favorites.has(id)) {
        favorites.delete(id);
      } else {
        favorites.add(id);
      }
      saveState();
      updateBadges();
      renderProducts(el('search-input').value);
      
      // Update modal button if open
      const modalFav = el('modal-fav-btn');
      if (modalFav && modalFav.dataset.id === id) {
        modalFav.classList.toggle('active', favorites.has(id));
      }
    }

    function toggleModalFavorite() {
      const btn = el('modal-fav-btn');
      const id = btn.dataset.id;
      toggleFavorite(id);
    }

    function addToCartWithAnimation() {
      if (!currentVariant) return;

      // Create flying element
      const flyer = document.createElement('img');
      flyer.src = currentVariant.img || DEFAULT_IMG;
      flyer.className = 'flyer';
      
      const rect = el('modal-image').getBoundingClientRect();
      const cartRect = document.querySelector('.bottom-nav .nav-item:last-child').getBoundingClientRect();
      
      flyer.style.width = rect.width + 'px';
      flyer.style.height = rect.height + 'px';
      flyer.style.left = rect.left + 'px';
      flyer.style.top = rect.top + 'px';
      
      document.body.appendChild(flyer);

      // Animate
      const dx = cartRect.left - rect.left + cartRect.width/2 - rect.width/2;
      const dy = cartRect.top - rect.top + cartRect.height/2 - rect.height/2;

      flyer.animate([
        { transform: 'translate(0,0) scale(1) rotate(0deg)', opacity: 1 },
        { transform: `translate(${dx*0.5}px,${dy*0.3}px) scale(0.8) rotate(5deg)`, opacity: 0.9, offset: 0.5 },
        { transform: `translate(${dx}px,${dy}px) scale(0.2) rotate(15deg)`, opacity: 0 }
      ], { 
        duration: 700, 
        easing: 'cubic-bezier(0.2,0.8,0.2,1)' 
      }).onfinish = () => {
        flyer.remove();
        addToCart();
        
        // Pulse cart icon
        const cartNav = document.querySelector('.bottom-nav .nav-item:nth-child(3)');
        cartNav.style.transform = 'scale(1.2)';
        setTimeout(() => cartNav.style.transform = 'scale(1)', 200);
      };
    }

    function addToCart() {
      if (!currentVariant) return;

      const existing = cart.find(item => 
        item.id === currentVariant.id && item.weight === selectedWeight
      );

      if (existing) {
        existing.qty++;
      } else {
        cart.push({
          id: currentVariant.id,
          name: currentVariant.name,
          img: currentVariant.img,
          weight: selectedWeight,
          pricePerKg: currentVariant.pricePerKg,
          pricePerUnit: currentVariant.pricePerUnit,
          qty: 1
        });
      }

      saveState();
      updateBadges();
      closeProductModal();

      // Haptic
      if (window.Telegram?.WebApp?.HapticFeedback) {
        window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
      }
    }

    function updateBadges() {
      const cartCount = cart.reduce((sum, item) => sum + item.qty, 0);
      const favCount = favorites.size;
      
      const cartBadge = el('cart-badge');
      const favBadge = el('fav-badge');
      
      cartBadge.textContent = cartCount;
      cartBadge.style.display = cartCount > 0 ? 'flex' : 'none';
      
      favBadge.textContent = favCount;
      favBadge.style.display = favCount > 0 ? 'flex' : 'none';

      // Update fav buttons
      document.querySelectorAll('.fav-btn').forEach(btn => {
        const id = btn.dataset.id;
        btn.classList.toggle('active', favorites.has(id));
        btn.innerHTML = favorites.has(id) ? '‚ô•' : '‚ô°';
      });
    }

    function closeProductModal() {
      el('product-modal').classList.remove('active');
      document.body.style.overflow = '';
      currentProduct = null;
      currentVariant = null;
    }

    function openCartModal() {
      const body = el('cart-body');
      
      if (cart.length === 0) {
        body.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">üõí</div>
            <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
            <p style="font-size: 14px; margin-top: 8px;">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
          </div>
        `;
      } else {
        body.innerHTML = cart.map((item, idx) => {
          let price = 0;
          if (item.pricePerKg) {
            let discountRate = 0;
            for (const threshold of DISCOUNT_THRESHOLDS) {
              if (item.weight >= threshold.g) discountRate = threshold.rate;
            }
            price = (item.weight / 1000) * item.pricePerKg * (1 - discountRate) * item.qty;
          } else if (item.pricePerUnit) {
            price = item.pricePerUnit * item.qty;
          }

          return `
            <div class="cart-item">
              <img src="${item.img || DEFAULT_IMG}" class="cart-item-image" alt="">
              <div class="cart-item-info">
                <div class="cart-item-name">${item.name}</div>
                <div class="cart-item-variant">${item.weight}–≥ √ó ${item.qty}</div>
                <div class="cart-item-weights">
                  ${[100,200,300,400,500].map(w => `
                    <button class="cart-weight-btn ${item.weight === w ? 'active' : ''}" 
                            onclick="changeCartWeight(${idx}, ${w})">${w}–≥</button>
                  `).join('')}
                </div>
                <div class="cart-item-controls">
                  <button class="qty-btn" onclick="changeQty(${idx}, -1)">‚àí</button>
                  <span>${item.qty}</span>
                  <button class="qty-btn" onclick="changeQty(${idx}, 1)">+</button>
                </div>
              </div>
              <div class="cart-item-price">${fmtRub(price)}</div>
            </div>
          `;
        }).join('');

        // Add summary and form
        const total = cart.reduce((sum, item) => {
          if (item.pricePerKg) {
            let discountRate = 0;
            for (const threshold of DISCOUNT_THRESHOLDS) {
              if (item.weight >= threshold.g) discountRate = threshold.rate;
            }
            return sum + ((item.weight / 1000) * item.pricePerKg * (1 - discountRate) * item.qty);
          } else if (item.pricePerUnit) {
            return sum + (item.pricePerUnit * item.qty);
          }
          return sum;
        }, 0);

        body.innerHTML += `
          <div class="cart-summary">
            <div class="cart-total">
              <span class="cart-total-label">–ò—Ç–æ–≥–æ:</span>
              <span class="cart-total-price">${fmtRub(total)}</span>
            </div>
            
            <div class="form-group">
              <label class="form-label">–ì–æ—Ä–æ–¥</label>
              <select class="form-select" id="checkout-city">
                <option value="–ü–µ–Ω–∑–∞">–ü–µ–Ω–∑–∞</option>
                <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
              </select>
            </div>
            
            <div class="form-group">
              <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
              <input type="tel" class="form-input" id="checkout-phone" placeholder="+7 (999) 999-99-99">
            </div>
            
            <div class="form-group">
              <label class="form-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
              <textarea class="form-textarea" id="checkout-address" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞"></textarea>
            </div>
            
            <div class="form-group">
              <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
              <textarea class="form-textarea" id="checkout-comment" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É"></textarea>
            </div>

            <button class="btn-order" id="submit-order-btn" onclick="submitOrder()">
              –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
              <div class="leaf icon-1">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 208.52 511.88">
                  <path class="fil-leaf-1" d="M121.86 141.25c16.73,2.91 65.77,9.16 77.74,-14.94 14.49,-29.19 12.6,-56.91 -15.12,-69.09 -11.3,-4.96 -22.28,-7.7 -32.28,-9.66 -24.58,24.72 -41.22,75.51 -43.83,83.82 4.31,3.56 8.81,6.86 13.49,9.87zm-17.26 41.05c2.87,7.92 8.26,29.59 7.63,79.7 -0.16,12.74 -0.48,25.41 -0.81,38.43 -1.4,55.59 -2.96,117.52 7.12,210.69l-7.09 0.75c-10.12,-93.56 -8.56,-155.77 -7.15,-211.61 0.33,-13.06 0.65,-25.77 0.81,-38.35 0.53,-42.42 -3.06,-63.29 -5.69,-72.77 -7.55,8.48 -18.48,15.07 -34.33,16.54 -26.77,2.47 -43.19,-16.99 -52.84,-36.58 16.49,-8.49 65.65,-32.22 98.27,-31.47 1.86,1.42 3.76,2.8 5.69,4.13 -0.15,5.56 -1.43,24.61 -11.62,40.53zm-41.18 -148.65c-0.32,0.84 1.68,9.87 -6.19,10.71 -7.87,0.84 -3.26,-5.14 -6.82,-7.98 -3.57,-2.84 -9.97,-14.59 1.99,-15.96 11.97,-1.37 11.02,13.23 11.02,13.23zm124.63 55.54c0,0 -3.89,14.8 -10.18,18.69 -6.3,3.88 -22.78,7.24 -28.87,0.11 -6.09,-7.14 -1.57,-31.71 17.64,-30.45 19.21,1.26 22.68,8.4 21.42,11.65zm-101.53 67.51c0,0 5.88,5.56 5.46,9.87 -0.42,4.3 -5.78,19.21 -14.07,20.05 -8.29,0.84 -24.15,-6.82 -21.84,-17.53 2.31,-10.71 10.5,-11.34 12.6,-10.6 2.1,0.74 3.36,2.1 17.85,-1.78zm61.49 -109.94c-12.74,-2.33 -23.63,-3.69 -31.15,-7.4 0,0 -2.41,15.22 -4.51,19.74 -2.1,4.51 -6.3,17.32 -14.8,21.1 -8.5,3.78 -9.87,-28.14 4.62,-45.15 0,0 -10.13,-4.4 -22.34,-9.92 -11.47,31.21 -7.3,64.58 -7.28,64.68l-0.48 0.06c9.73,14.77 20.76,28.04 33.37,39.01 3.68,-11.43 19.48,-57.46 42.58,-82.12zm-71.44 -23.1c-16.59,-7.55 -35.59,-16.58 -38.25,-19.47 -1.97,-2.14 -4.87,-3.72 -7.63,-4.2 9.11,27.4 20.23,54.59 34.36,78.62 1.13,1.92 2.28,3.82 3.45,5.7 -0.66,-11.21 -0.85,-36.56 8.07,-60.65zm-49.59 -23.57c-2.34,0.66 -4.05,2.62 -4.09,6.41 -0.1,9.45 -9.03,35.38 -9.03,35.38 0,0 33.07,14.91 22.99,23.1 -10.08,8.19 -25.41,-8.5 -26.35,-9.34 0,0 -5.94,16.24 -8.44,35.85 11.53,-1.14 38.81,-2.11 72.53,8.35 -4.45,-6.19 -8.65,-12.68 -12.61,-19.42 -14.44,-24.56 -25.77,-52.36 -35.01,-80.32zm-25.33 95.01c-0.61,6.01 -0.86,12.26 -0.49,18.39 0,0 56.17,-9.87 57.33,8.71 1.15,18.58 -58.48,9.45 -58.48,9.45 0,0 2.71,16.68 10.73,34.23 16.07,-8.25 62.14,-30.45 95.29,-31.76l-1.75 -1.5 0.01 -0.03c-9.54,-8.13 -18.2,-17.54 -26.08,-27.89l-0.01 0.04c-36.16,-12.16 -65.36,-10.82 -76.53,-9.63z"/>
                </svg>
              </div>
              <div class="leaf icon-2">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 420.62 554.38">
                  <path class="fil-leaf-2" d="M1.57 554.38c-0.01,-0.44 -2.46,-153.75 -1.23,-217.01 0.74,-38.16 6.99,-96.57 32.48,-148.36 17.72,-36 44.66,-68.8 85.37,-89.54l32.28 -4.39c21.9,-6.8 39.46,-7.7 45.04,-7.81 4.32,4.98 10.37,12.18 17.72,21.54 -0.39,10.62 -6.13,113.86 -82.32,208.5 -31.36,-18.46 -51.28,-57.42 -51.28,-57.42 52.13,-30.97 58.88,-51.52 69.61,-68.07 10.73,-16.56 2.45,-44.16 -11.65,-26.06 -14.11,18.09 -65.01,68.07 -65.01,68.07 -12.27,-87.7 33.12,-110.39 33.12,-110.39l0.34 -0.64c-27.64,18.92 -47.12,44.59 -60.77,72.35 -24.37,49.53 -30.35,105.69 -31.07,142.44 -1.22,63.07 1.22,216.14 1.23,216.58l-13.85 0.22zm216.49 -439.34c17.47,22.75 40.96,56.05 66.08,99.4 0.27,13.62 0.62,100.64 -33.48,153.85 -24.85,-9.4 -40.14,-15.03 -40.14,-15.03 12.57,-11.04 46.61,-87.09 23.3,-91.68 -23.3,-4.6 -47.99,84.63 -47.99,84.63 -21.55,-10.35 -42.58,-21.94 -50.33,-26.28 68.93,-86.04 80.61,-179.05 82.56,-204.89zm71.3 108.53c28.78,50.84 59.27,114.6 85.02,190.51 -4.31,0.96 -8.4,-1.03 -8.4,-1.03 -42.77,-17.04 -82,-32.13 -110.36,-42.88 29.72,-47.26 33.46,-119.21 33.74,-146.6zm106.95 70.68c0,0 -16.4,-14.1 -20.54,-22.84 -4.14,-8.74 -15.18,-3.68 -13.95,4.29 1.23,7.97 11.5,45.69 12.27,51.21 0.77,5.52 20.08,6.13 21,-1.99 0.92,-8.13 2.76,-23.61 1.23,-30.66zm-88.46 28.98c0,0 -8.43,4.29 -7.51,15.49 0.92,11.19 10.89,28.36 18.09,30.66 7.21,2.3 18.7,-25.14 -10.58,-46.15zm-109.42 -240.52c15.35,-63.34 56.21,-82.7 93.65,-82.7 38.33,0 65.31,22.23 65.31,22.23 0,0 -11.65,13.03 -33.42,13.95 -21.77,0.92 -28.52,11.65 -28.98,16.41 -0.46,4.75 1.53,16.25 32.35,18.24 30.82,1.99 55.19,-25.14 55.19,-25.14 16.95,23.84 26.52,45.94 31.83,64.51 -16.87,6.83 -73.84,22.75 -197.04,-4.57 -8.01,-10.2 -14.48,-17.86 -18.9,-22.93zm217.3 32.51c7.8,30.68 3.91,50.53 3.91,50.53 -55.65,4.45 -56.73,-5.98 -77.73,-6.59 -21,-0.61 -22.69,28.06 14.41,34.19 37.1,6.13 63.01,-1.99 63.01,-1.99 -1.13,20.07 -2.53,38.3 -4.11,54.87 -17.3,-0.51 -66.77,-6.48 -137.23,-52.73l-0.13 0.2c-21.09,-34.73 -40.52,-62.06 -55.57,-81.67 118.17,25.28 175.11,10.36 193.44,3.2zm-1.01 136.18c-10.45,105.02 -28.21,141.06 -31.88,153.37 -0.95,3.17 -2.29,5.35 -3.82,6.82 -27.16,-79.89 -59.57,-146.38 -89.72,-198.56l-0.02 -0.57 -0.3 0.01c-1.8,-3.11 -3.59,-6.18 -5.38,-9.19 66.28,41.51 113.43,47.51 131.12,48.12z"/>
                </svg>
              </div>
              <div class="leaf icon-3">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 313.64 405.79">
                  <path class="fil-leaf-3" d="M268.76 135.61c0,0 -22.17,11.9 -50.23,28.92 -21.12,-5.52 -82.36,-27.74 -81.95,-100.04l-0.14 -0.02c3.32,-12.49 5.48,-21.39 6.11,-24.05 10.61,-20.2 38.05,-50.12 105.57,-37.36 98.73,18.65 57.69,95.74 53.71,98.23 -3.98,2.49 -21.39,6.71 -72.86,-30.59 0,0 -18.15,-14.17 -21.88,12.68 -3.73,26.86 48.99,48.99 61.68,52.23zm-6.57 270.17c-0.06,-0.43 -20.14,-148.39 -56.4,-233.41 -9.42,5.88 -19.19,12.19 -28.79,18.69 0,0 -17.41,-10.44 -27.6,-29.59 -10.2,-19.15 -5.22,-21.76 -13.43,-22.26 -8.21,-0.5 -5.1,34.69 19.52,64.78 0,0 -13.7,11.34 -26.34,23.33 -5.68,-9.69 -18.35,-34.11 -23.43,-66.68l-0.05 -0.01c0.31,-0.8 0.62,-1.59 0.93,-2.38 10.57,-26.8 19.85,-57.53 26.36,-81.01 6.01,61.39 57.45,83.42 80.65,90.27 37.09,86.22 59.66,236.37 59.72,236.8l-11.15 1.45zm-136.16 -175.46c-7.88,7.66 -14.84,15.23 -17.05,19.93 0,0 -7.21,-23.75 -14.42,-18.65 -7.21,5.1 2.11,32.08 2.11,36.8 0,0 -17.66,31.83 -20.89,34.57 -0.83,0.7 -1.66,1.24 -2.49,1.6 -0.23,-13.47 2.61,-34.23 7.4,-57.21 5.42,-26.02 13.33,-54.79 22.1,-79.02 5.96,30.61 18.04,53.25 23.24,61.99zm-56.93 74.37c-0.87,-0.37 -1.72,-1.02 -2.52,-1.97 -2.74,-3.23 -15.17,-25.61 -15.17,-25.61 0,0 6.22,-19.03 15.17,-32.95 8.95,-13.93 -5.84,-15.67 -10.82,-7.21 -4.97,8.46 -12.56,24.74 -12.56,24.74 0,0 -6.31,-12.32 -13.32,-27.52 29.11,-16 53.59,-43.62 66.24,-59.59 -7.75,22.68 -14.67,48.42 -19.56,71.93 -4.83,23.18 -7.69,44.25 -7.46,58.19zm-40.98 -74.37c-7.17,-15.81 -14.58,-33.78 -16.38,-44.11 0,0 40.04,-13.68 46.01,-27.11 5.97,-13.43 -12.68,-19.4 -51.23,4.48 0,0 -7.71,-17.19 -6.37,-43.78 66.5,2.13 113.04,-29.91 128.31,-42.15 -6.46,23.16 -15.53,53 -25.8,79.07 -0.57,1.44 -1.13,2.91 -1.7,4.39 -5.54,7.86 -35.3,48.46 -72.84,69.21zm-27.68 -114.74c0.71,-8.36 2.33,-17.55 5.34,-27.35 0,0 47.75,5.84 50.36,-10.57 2.61,-16.41 -41.28,-5.84 -41.28,-5.84 0,0 25.99,-35.56 60.3,-33.82 28.82,1.46 52.37,13.88 59.18,17.82 -1.11,4.27 -2.41,9.2 -3.89,14.62 -5.75,5.22 -54.72,47.49 -130.01,45.14z"/>
                </svg>
              </div>
              <div class="leaf icon-4">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 359.65 724.72">
                  <path class="fil-leaf-4" d="M251.9 132.52c5.01,7.69 14.83,26.38 10.9,50 12.23,19.64 25.84,44.23 37.91,76.21 15.43,40.91 28.34,93.9 32.59,164.05 8.43,139.15 26.3,300.52 26.36,300.99l-8.9 0.95c-0.05,-0.47 -17.95,-162.05 -26.39,-301.41 -4.19,-69.11 -16.87,-121.23 -32.03,-161.42 -10.46,-27.74 -22.12,-49.81 -32.97,-67.87 -11.69,25.15 -46.54,32.88 -60.3,31.22 0,0 7.39,-21.36 26.38,-35.61 18.99,-14.24 -34.02,-32.18 -48.79,33.5 0,0 -17.36,-0.38 -44.69,-16.34 11.21,-15.23 54.9,-71.68 91.8,-79.27 13.37,2.8 23.04,4.3 28.14,5zm-123.8 71.95c-11.63,-7.19 -24.9,-17.14 -39.29,-30.93 0,0 33.76,-24 51.43,-32.18 3.94,-1.82 6.23,-3.74 7.22,-5.53 0.4,-0.74 0.59,-1.45 0.57,-2.14 -0.14,-5.14 -11.54,-8.37 -24.93,-3.67 -19.52,6.86 -41.67,17.93 -50.64,27.17 0,0 -14.95,-14.16 -27.28,-30.46 13.73,-5.9 46.68,-16.9 105.36,-19.32 1.37,0.46 2.74,0.91 4.09,1.36 23.42,7.71 43.79,13.08 60.01,16.77 -36.68,13.59 -76.29,64.98 -86.55,78.94zm-85.63 -81.43c-0.55,-0.76 -1.08,-1.53 -1.61,-2.3 -3.4,-4.95 -6.39,-9.96 -8.49,-14.72 0,0 8.59,-1.25 17.61,-3.44 10.4,-2.52 21.36,-6.28 20.37,-10.8 -0.81,-3.7 -4.42,-6.8 -10.79,-8.26 -8.15,-1.86 -20.83,-1.06 -38,4.57 0,0 -20.04,-38.77 -21.36,-44.84 -0.46,-2.1 -0.09,-3.88 0.82,-5.27 21.98,13.27 43.46,24.73 64.03,34.61 26.53,12.75 51.57,22.88 74.23,30.91 -53.49,3.36 -83.97,13.91 -96.81,19.53zm-37.55 -87.92c1.59,-0.53 3.43,-0.65 5.29,-0.31 5.8,1.06 22.42,11.6 51.17,8.44 0,0 5.79,9.17 11.47,13.81 1.59,1.3 3.18,2.25 4.62,2.54 5.68,1.14 7.25,-7.71 1.67,-15.07 -0.9,-1.18 -1.98,-2.33 -3.26,-3.39 0,0 2.1,-0.44 5.61,-1.29 3.8,-0.92 9.25,-2.33 15.46,-4.19 14.66,33.07 29.11,52.04 37.62,61.42 -20.84,-7.6 -43.57,-16.96 -67.53,-28.47 -19.97,-9.59 -40.81,-20.68 -62.13,-33.48zm96.34 -0.79c8.37,-2.65 17.67,-6.03 26.06,-10.07 0,0 7.91,43.25 34.29,54.07 0,0 0.41,0.11 1.05,0.18 3.11,0.38 11.59,0.1 4.32,-16.31l-0.1 -0.23c-8.97,-20.04 -20.57,-40.88 -21.36,-45.89 0,0 15.49,-6.72 36.74,-11.5l1.33 -0.3c2.14,70.96 19.13,103.97 27.19,115.76 -15.3,-3.61 -33.91,-8.65 -55,-15.61 -1.04,-0.34 -2.1,-0.69 -3.15,-1.05l0.05 -0.46 -6.39 -1.7 -1.85 -0.64c-3.65,-3.1 -23.05,-20.99 -43.18,-66.26zm86.77 -30.97c8.74,-1.72 18.24,-3.02 27.9,-3.37 0,0 -7.65,53.01 14.24,63.3 0,0 17.41,7.91 6.33,-60.93 0,0 48,6.33 46.95,59.34 -0.91,45.76 -25.8,62.44 -32.59,66.14 -5.12,-0.73 -13.59,-2.1 -24.84,-4.43l-0.01 -0.77 -7.74 -0.89 -0.69 -0.15c-4.02,-4.5 -27.19,-33.99 -29.55,-118.24z"/>
                </svg>
              </div>
              <div class="leaf icon-5">
                <svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" version="1.1" style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision; image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd" viewBox="0 0 513.57 1042.57">
                  <path class="fil-leaf-5" d="M207.74 252.52c0,0 -3.36,127.53 94.31,130.89 0,0 36.92,0.67 66.79,-32.89 0,0 -39.94,-10.4 -50.01,-47.99 -10.07,-37.59 63.1,-27.52 82.23,3.36 0,0 17.47,-34.44 35.17,-77.24 -60.5,-36.51 -169.57,-35.65 -182.77,-35.4 -16.15,16.52 -28.62,31.28 -37.69,42.91l-0 -0c-3.79,4.86 -6.98,9.18 -9.61,12.86l0.02 -0.03c-0.48,0.66 -0.93,1.31 -1.37,1.93l-0.05 0.08 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.7 1 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07 -0.05 0.07c1.63,-0.35 3.25,-0.73 4.87,-1.16zm202.05 -202.04c0,0 -10.74,-24.5 15.1,-37.92 25.84,-13.42 40.95,2.68 38.93,7.72 -2.01,5.03 -36.92,38.6 -54.03,30.21zm41.95 28.86c0,0 3.69,-24.84 23.16,-20.14 19.47,4.7 -2.35,24.16 -6.71,25.51 -4.36,1.34 -17.79,3.36 -16.45,-5.37zm-13.33 143.98c6.34,-15.57 12.61,-32.08 18.03,-48.32 0,0 -14.77,-5.71 -43.63,-9.06 -28.86,-3.36 -48.67,-8.06 -47.99,-20.47 0.67,-12.42 19.47,-12.42 31.21,-12.08 11.75,0.34 44.3,9.4 65.45,21.48 0,0 6.06,-15.02 14,-34.26 -13.59,-6.7 -55.53,-24.2 -111.04,-17.16 -44.54,28.56 -79.28,58.2 -105.29,84.07 26.84,-0.04 122.78,2.26 179.27,35.82zm39.24 -107.98c11.26,-27.2 25.32,-60.47 31.48,-72.24 2.59,-4.94 4.04,-8.91 4.44,-12.19l-0.07 0.03c-7.86,2.78 -15.55,5.64 -23.08,8.58l-0.06 0.03c-43.75,17.09 -81.99,36.73 -115.12,57.12 50.7,-3.62 88.86,12.06 102.42,18.68zm-266.36 117.31l-0 0 0.19 -0.24c1.61,-2.06 3.33,-4.22 5.15,-6.47l0.6 -0.74c1.8,-2.22 3.71,-4.51 5.72,-6.89l0.53 -0.62c0.65,-0.77 1.31,-1.54 1.99,-2.33l0.45 -0.53c0.8,-0.93 1.62,-1.87 2.44,-2.82l-0.47 -0.16c26.43,-78.83 20.84,-169.24 18.14,-197.94 -29.06,6.17 -63.45,14.58 -92.65,24.81 0,0 -10.74,27.18 -8.73,47.66 2.01,20.47 10.4,39.6 17.79,47.99 7.38,8.39 -4.03,19.8 -14.1,11.08 -10.07,-8.73 -33.9,-27.86 -31.88,-85.58 0,0 -51.69,29.87 -54.37,96.99 -2.41,60.36 60.31,104.42 124.22,99.27 -29.57,40.64 -52.99,92.96 -71.11,145.44 -34.37,99.52 -49.74,199.84 -51.89,221.41 -1.69,16.94 -9.22,61.56 -18.01,108.82 -8.48,45.59 -18.12,93.5 -24.81,121.32 -13.86,57.6 -20.46,188.53 -20.47,188.9l11.37 0.54c0.02,-0.37 6.56,-130.3 20.16,-186.81 6.77,-28.15 16.45,-76.26 24.95,-121.9 8.84,-47.51 16.42,-92.5 18.15,-109.76 2.13,-21.29 17.32,-120.37 51.32,-218.82 17.84,-51.67 40.86,-103.1 69.86,-142.81 3.19,-7.16 11.12,-24.22 15.49,-29.83zm25.46 -30.01c1.38,-1.51 2.8,-3.04 4.25,-4.58l0.29 -0.31c0.84,-0.89 1.69,-1.8 2.55,-2.7l0.67 -0.7c2.7,-2.84 5.52,-5.73 8.45,-8.67l0.65 -0.65c0.97,-0.98 1.96,-1.96 2.96,-2.95l0.38 -0.38c3.13,-3.09 6.39,-6.23 9.77,-9.41l0.58 -0.54c4.62,-4.35 9.48,-8.77 14.57,-13.25l0.68 -0.6c3.78,-3.32 7.7,-6.68 11.74,-10.06l0.29 -0.24c5.54,-4.63 11.33,-9.29 17.36,-13.99l0.57 -0.44c6.07,-4.71 12.39,-9.44 18.97,-14.18l0.24 -0.17c4.93,-3.55 10.01,-7.1 15.23,-10.64l0.24 -0.16c4.13,-2.8 8.36,-5.6 12.68,-8.38 1.65,-4.78 23.49,-68.56 28.59,-99.33 -14.9,-0.31 -31.83,-0.37 -51.18,-0.15 0,0 -12.75,35.24 -9.73,54.03 3.02,18.79 9.73,34.9 -0.34,37.25 -10.07,2.35 -31.21,-20.47 -17.79,-89.27 0,0 -24.82,3.76 -57.81,10.6 2.58,27.06 8.08,112.25 -14.87,189.88zm130.78 -107.89l1.53 -0.95 0.35 -0.22c7.57,-4.71 15.41,-9.39 23.53,-14l0.16 -0.09c6.06,-3.44 12.27,-6.86 18.63,-10.22l0.29 -0.16c8.49,-4.49 17.26,-8.91 26.3,-13.23l0.6 -0.29c6.76,-3.22 13.68,-6.39 20.75,-9.5l0.12 -0.05c2.34,-1.03 4.7,-2.05 7.07,-3.06l0.5 -0.21c7,-2.98 14.15,-5.89 21.45,-8.74l1.17 -0.46c2.38,-0.92 4.78,-1.84 7.19,-2.75l0.09 -0.03c5.13,-1.93 10.34,-3.82 15.61,-5.68l0.07 -0.03c-2.61,-6.39 -11.96,-9.39 -26.62,-13.87 -18.07,-5.52 -44.02,-9.54 -92.15,-10.8 -4.31,26.52 -20.49,76.07 -26.62,94.33z"/>
                </svg>
              </div>
            </button>
          </div>
        `;
      }
      
      el('cart-modal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeCartModal() {
      el('cart-modal').classList.remove('active');
      document.body.style.overflow = '';
    }

    function changeQty(idx, delta) {
      if (!cart[idx]) return;
      cart[idx].qty += delta;
      if (cart[idx].qty <= 0) cart.splice(idx, 1);
      saveState();
      updateBadges();
      openCartModal(); // Re-render
    }

    function changeCartWeight(idx, weight) {
      if (!cart[idx]) return;
      cart[idx].weight = weight;
      saveState();
      openCartModal(); // Re-render
    }

    function submitOrder() {
      const btn = el('submit-order-btn');
      const phone = el('checkout-phone').value;
      const address = el('checkout-address').value;
      const city = el('checkout-city').value;
      const comment = el('checkout-comment').value;

      if (!phone || !address) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∞–¥—Ä–µ—Å');
        return;
      }

      // Animate leaves
      btn.classList.add('animating');
      
      setTimeout(() => {
        // Show loader
        el('loader').classList.add('active');
        
        // Prepare payload
        const payload = {
          type: 'cart',
          items: cart,
          contact: { phone, address, city, comment },
          total: cart.reduce((sum, item) => {
            if (item.pricePerKg) {
              let discountRate = 0;
              for (const threshold of DISCOUNT_THRESHOLDS) {
                if (item.weight >= threshold.g) discountRate = threshold.rate;
              }
              return sum + ((item.weight / 1000) * item.pricePerKg * (1 - discountRate) * item.qty);
            } else if (item.pricePerUnit) {
              return sum + (item.pricePerUnit * item.qty);
            }
            return sum;
          }, 0),
          timestamp: Date.now()
        };

        // Send to backend
        fetch(`${BACKEND}/order`, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload)
        })
        .then(() => {
          el('loader').classList.remove('active');
          cart = [];
          saveState();
          updateBadges();
          closeCartModal();
          
          if (window.Telegram?.WebApp) {
            window.Telegram.WebApp.showAlert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.');
          } else {
            alert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
          }
        })
        .catch(err => {
          console.error(err);
          el('loader').classList.remove('active');
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ.');
        })
        .finally(() => {
          btn.classList.remove('animating');
        });
      }, 800);
    }

    function showMain() {
      document.querySelectorAll('.nav-item').forEach((item, idx) => {
        item.classList.toggle('active', idx === 0);
      });
      el('search-input').value = '';
      currentCategory = 'all';
      document.querySelectorAll('.category-tab').forEach(t => t.classList.remove('active'));
      document.querySelector('.category-tab[data-category="all"]').classList.add('active');
      renderProducts();
      window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function showFavorites() {
      document.querySelectorAll('.nav-item').forEach((item, idx) => {
        item.classList.toggle('active', idx === 1);
      });
      
      const container = el('product-grid');
      const favProducts = PRODUCTS.filter(p => favorites.has(p.id));
      
      if (favProducts.length === 0) {
        container.innerHTML = `
          <div class="empty-state" style="grid-column: 1/-1;">
            <div class="empty-state-icon">‚ô°</div>
            <p>–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤</p>
          </div>
        `;
      } else {
        container.innerHTML = favProducts.map(product => {
          const priceText = product.pricePerKg ? fmtRub(product.pricePerKg) + '/–∫–≥' : 
                           product.pricePerUnit ? fmtRub(product.pricePerUnit) : '';
          return `
            <div class="product-card" onclick="openProductModal('${product.id}')">
              <div class="product-image-wrap">
                <img src="${product.img || DEFAULT_IMG}" class="product-image" alt="${product.name}">
                <button class="fav-btn active" onclick="event.stopPropagation(); toggleFavorite('${product.id}')">
                  ‚ô•
                </button>
              </div>
              <div class="product-info">
                <div class="product-name">${product.name}</div>
                <div class="product-price">${priceText}</div>
              </div>
            </div>
          `;
        }).join('');
      }
    }
  </script>
</body>
</html>
