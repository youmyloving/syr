<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–°—ã—Ä–æ–º–∞–Ω–∏—è ‚Äî –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Å—ã—Ä—ã –∏ –º–æ–ª–æ—á–Ω–∞—è –ø—Ä–æ–¥—É–∫—Ü–∏—è</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta name="theme-color" content="#F5F1EB" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ - —Ç—ë–ø–ª—ã–µ –Ω–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Ç–æ–Ω–∞ */
      --cream: #F5F1EB;
      --cream-light: #FFF9F0;
      --gold: #C9A962;
      --gold-light: #E8D5A3;
      --gold-pale: #F0E6C8;
      --brown-dark: #2C2416;
      --brown-medium: #5C4D3C;
      --brown-light: #8A7F6A;
      --border: #E2D4BD;
      --shadow-soft: 0 4px 20px rgba(0,0,0,0.04);
      --shadow-medium: 0 8px 30px rgba(0,0,0,0.08);
      --shadow-strong: 0 12px 40px rgba(0,0,0,0.12);
      
      /* –†–∞–∑–º–µ—Ä—ã */
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-full: 999px;
    }

    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      margin: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--cream);
      color: var(--brown-dark);
      -webkit-font-smoothing: antialiased;
      line-height: 1.5;
      overflow-x: hidden;
    }

    /* –°–∫–µ–ª–µ—Ç–æ–Ω-–∑–∞–≥—Ä—É–∑–∫–∞ */
    .skeleton {
      background: linear-gradient(90deg, #E2D4BD 25%, #F0E6C8 50%, #E2D4BD 75%);
      background-size: 200% 100%;
      animation: shimmer 1.5s infinite;
      border-radius: var(--radius-md);
    }

    @keyframes shimmer {
      0% { background-position: 200% 0; }
      100% { background-position: -200% 0; }
    }

    /* –®–∞–ø–∫–∞ */
    .app-header {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      background: rgba(245, 241, 235, 0.95);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border);
      padding: 12px 16px;
      transition: all 0.3s ease;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 10px;
      font-family: 'Playfair Display', serif;
      font-size: 22px;
      font-weight: 700;
      color: var(--brown-dark);
      text-decoration: none;
    }

    .logo-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, var(--gold), #B8954A);
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      box-shadow: var(--shadow-soft);
    }

    .user-avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--cream-light);
      border: 2px solid var(--gold-light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
      color: var(--brown-medium);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s;
    }

    .user-avatar:active {
      transform: scale(0.95);
    }

    .user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    /* –ü–æ–∏—Å–∫ */
    .search-container {
      position: fixed;
      top: 60px;
      left: 0;
      right: 0;
      z-index: 99;
      background: rgba(245, 241, 235, 0.9);
      backdrop-filter: blur(10px);
      padding: 8px 16px 12px;
      border-bottom: 1px solid transparent;
      transition: all 0.3s;
    }

    .search-container.scrolled {
      border-bottom-color: var(--border);
      box-shadow: var(--shadow-soft);
    }

    .search-box {
      position: relative;
      max-width: 1200px;
      margin: 0 auto;
    }

    .search-input {
      width: 100%;
      padding: 12px 16px 12px 44px;
      border: 1px solid var(--border);
      border-radius: var(--radius-full);
      background: var(--cream-light);
      font-size: 15px;
      font-family: inherit;
      color: var(--brown-dark);
      transition: all 0.3s;
      outline: none;
    }

    .search-input:focus {
      border-color: var(--gold);
      box-shadow: 0 0 0 3px rgba(201, 169, 98, 0.1);
    }

    .search-input::placeholder {
      color: var(--brown-light);
    }

    .search-icon {
      position: absolute;
      left: 16px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--brown-light);
      font-size: 18px;
    }

    /* –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç */
    .main-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 140px 16px 100px;
      min-height: 100vh;
    }

    /* –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂ */
    .hits-section {
      margin-bottom: 24px;
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 16px;
      padding: 0 4px;
    }

    .section-title {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      font-weight: 700;
      color: var(--brown-dark);
      margin: 0;
    }

    .see-all {
      font-size: 13px;
      color: var(--gold);
      text-decoration: none;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .hits-scroll {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 4px 4px 12px;
      margin: 0 -4px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .hits-scroll::-webkit-scrollbar {
      display: none;
    }

    .hit-card {
      flex: 0 0 280px;
      scroll-snap-align: start;
      background: var(--cream-light);
      border-radius: var(--radius-lg);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      position: relative;
    }

    .hit-card:active {
      transform: scale(0.98);
    }

    .hit-card:hover {
      box-shadow: var(--shadow-medium);
    }

    .hit-badge {
      position: absolute;
      top: 12px;
      left: 12px;
      background: linear-gradient(135deg, #E74C3C, #C0392B);
      color: white;
      padding: 4px 12px;
      border-radius: var(--radius-full);
      font-size: 11px;
      font-weight: 700;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      z-index: 2;
      box-shadow: 0 2px 8px rgba(231, 76, 60, 0.3);
    }

    .hit-image {
      width: 100%;
      height: 180px;
      object-fit: cover;
      background: linear-gradient(135deg, #E2D4BD, #F0E6C8);
    }

    .hit-content {
      padding: 16px;
    }

    .hit-name {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
      color: var(--brown-dark);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .hit-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--gold);
    }

    /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */
    .categories-section {
      margin-bottom: 24px;
      position: sticky;
      top: 120px;
      z-index: 98;
      background: var(--cream);
      padding: 8px 0;
    }

    .categories-scroll {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      padding: 4px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .categories-scroll::-webkit-scrollbar {
      display: none;
    }

    .category-tab {
      flex: 0 0 auto;
      scroll-snap-align: start;
      padding: 10px 20px;
      border-radius: var(--radius-full);
      border: 1px solid var(--border);
      background: var(--cream-light);
      font-size: 14px;
      font-weight: 500;
      color: var(--brown-medium);
      cursor: pointer;
      transition: all 0.3s;
      white-space: nowrap;
      user-select: none;
    }

    .category-tab.active {
      background: linear-gradient(135deg, var(--gold), #B8954A);
      color: white;
      border-color: transparent;
      box-shadow: 0 4px 12px rgba(201, 169, 98, 0.3);
    }

    .category-tab:active {
      transform: scale(0.95);
    }

    /* –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ */
    .products-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    @media (min-width: 768px) {
      .products-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 16px;
      }
    }

    @media (min-width: 1024px) {
      .products-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .product-card {
      background: var(--cream-light);
      border-radius: var(--radius-md);
      overflow: hidden;
      box-shadow: var(--shadow-soft);
      cursor: pointer;
      transition: all 0.3s;
      position: relative;
      display: flex;
      flex-direction: column;
    }

    .product-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-medium);
    }

    .product-card:active {
      transform: scale(0.98);
    }

    .product-image-wrap {
      position: relative;
      width: 100%;
      aspect-ratio: 4/3;
      overflow: hidden;
      background: linear-gradient(135deg, #E2D4BD, #F0E6C8);
    }

    .product-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.3s;
    }

    .product-card:hover .product-image {
      transform: scale(1.05);
    }

    .fav-btn {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(4px);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 16px;
      color: var(--brown-light);
      transition: all 0.2s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      z-index: 2;
    }

    .fav-btn:hover {
      transform: scale(1.1);
    }

    .fav-btn.active {
      color: #E74C3C;
      background: rgba(231, 76, 60, 0.1);
    }

    .quick-add {
      position: absolute;
      bottom: 8px;
      right: 8px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), #B8954A);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      font-weight: 600;
      opacity: 0;
      transform: translateY(10px);
      transition: all 0.3s;
      box-shadow: 0 4px 12px rgba(201, 169, 98, 0.4);
      z-index: 2;
    }

    .product-card:hover .quick-add,
    .product-card:focus-within .quick-add {
      opacity: 1;
      transform: translateY(0);
    }

    .quick-add:active {
      transform: scale(0.9);
    }

    .product-info {
      padding: 12px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .product-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--brown-dark);
      margin-bottom: 4px;
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
      line-height: 1.4;
      min-height: 40px;
    }

    .product-price {
      font-size: 16px;
      font-weight: 700;
      color: var(--gold);
      margin-top: auto;
    }

    .product-unit {
      font-size: 12px;
      color: var(--brown-light);
      font-weight: 400;
    }

    /* –ú–æ–¥–∞–ª–∫–∞ —Ç–æ–≤–∞—Ä–∞ */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(44, 36, 22, 0.6);
      backdrop-filter: blur(8px);
      z-index: 200;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
      display: flex;
      align-items: flex-end;
      justify-content: center;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .product-modal {
      background: var(--cream-light);
      width: 100%;
      max-width: 600px;
      max-height: 90vh;
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .modal-overlay.active .product-modal {
      transform: translateY(0);
    }

    @media (min-width: 640px) {
      .modal-overlay {
        align-items: center;
        padding: 20px;
      }
      .product-modal {
        border-radius: var(--radius-lg);
        max-height: 85vh;
      }
    }

    .modal-header {
      position: relative;
      flex-shrink: 0;
    }

    .modal-image {
      width: 100%;
      aspect-ratio: 16/10;
      object-fit: cover;
      background: linear-gradient(135deg, #E2D4BD, #F0E6C8);
    }

    .modal-close {
      position: absolute;
      top: 16px;
      right: 16px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.9);
      backdrop-filter: blur(4px);
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-size: 20px;
      color: var(--brown-dark);
      box-shadow: var(--shadow-soft);
      transition: transform 0.2s;
      z-index: 10;
    }

    .modal-close:active {
      transform: scale(0.9);
    }

    .modal-body {
      padding: 20px;
      overflow-y: auto;
      flex: 1;
    }

    .modal-title {
      font-family: 'Playfair Display', serif;
      font-size: 24px;
      font-weight: 700;
      color: var(--brown-dark);
      margin-bottom: 8px;
    }

    .modal-description {
      font-size: 14px;
      color: var(--brown-medium);
      line-height: 1.6;
      margin-bottom: 20px;
    }

    /* –¢–∞–±–ª–µ—Ç–∫–∏ –≤–µ—Å–∞ */
    .weight-section {
      margin-bottom: 20px;
    }

    .section-label {
      font-size: 13px;
      font-weight: 600;
      color: var(--brown-light);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 10px;
    }

    .weight-pills {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .weight-pill {
      padding: 10px 20px;
      border-radius: var(--radius-full);
      border: 1.5px solid var(--border);
      background: var(--cream);
      font-size: 14px;
      font-weight: 600;
      color: var(--brown-medium);
      cursor: pointer;
      transition: all 0.2s;
      user-select: none;
    }

    .weight-pill:hover {
      border-color: var(--gold-light);
    }

    .weight-pill.active {
      background: linear-gradient(135deg, var(--gold), #B8954A);
      color: white;
      border-color: transparent;
      box-shadow: 0 4px 12px rgba(201, 169, 98, 0.3);
    }

    /* –í–∞—Ä–∏–∞–Ω—Ç—ã (–≤–∫—É—Å—ã/–≤–∏–¥—ã) */
    .variants-section {
      margin-bottom: 20px;
    }

    .variant-tabs {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 4px;
      scrollbar-width: none;
    }

    .variant-tabs::-webkit-scrollbar {
      display: none;
    }

    .variant-tab {
      flex: 0 0 auto;
      padding: 8px 16px;
      border-radius: var(--radius-full);
      border: 1.5px solid var(--border);
      background: var(--cream);
      font-size: 13px;
      font-weight: 500;
      color: var(--brown-medium);
      cursor: pointer;
      transition: all 0.2s;
      white-space: nowrap;
    }

    .variant-tab.active {
      background: var(--brown-dark);
      color: var(--cream-light);
      border-color: var(--brown-dark);
    }

    /* –°–ª–∞–π–¥–µ—Ä –≤–µ—Å–∞ */
    .custom-weight-section {
      margin-bottom: 20px;
      padding: 16px;
      background: var(--cream);
      border-radius: var(--radius-md);
      border: 1px solid var(--border);
    }

    .range-slider {
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: var(--border);
      outline: none;
      -webkit-appearance: none;
      margin: 10px 0;
    }

    .range-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), #B8954A);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(201, 169, 98, 0.4);
      border: 2px solid white;
    }

    .range-slider::-moz-range-thumb {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), #B8954A);
      cursor: pointer;
      border: 2px solid white;
      box-shadow: 0 2px 8px rgba(201, 169, 98, 0.4);
    }

    .weight-input-row {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-top: 12px;
    }

    .weight-input {
      flex: 1;
      padding: 10px 14px;
      border: 1.5px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 16px;
      font-weight: 600;
      text-align: center;
      background: white;
      color: var(--brown-dark);
    }

    .weight-input:focus {
      outline: none;
      border-color: var(--gold);
    }

    /* –¶–µ–Ω–∞ */
    .price-section {
      display: flex;
      align-items: baseline;
      gap: 8px;
      margin: 20px 0;
      padding: 16px;
      background: linear-gradient(135deg, rgba(201, 169, 98, 0.1), rgba(201, 169, 98, 0.05));
      border-radius: var(--radius-md);
      border: 1px solid rgba(201, 169, 98, 0.2);
    }

    .price-main {
      font-size: 28px;
      font-weight: 700;
      color: var(--gold);
    }

    .price-old {
      font-size: 16px;
      color: var(--brown-light);
      text-decoration: line-through;
    }

    .price-discount {
      font-size: 13px;
      color: #27AE60;
      font-weight: 600;
      margin-left: auto;
    }

    /* –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π */
    .modal-actions {
      display: flex;
      gap: 12px;
      margin-top: 20px;
    }

    .btn {
      flex: 1;
      padding: 16px 24px;
      border-radius: var(--radius-full);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .btn:active {
      transform: scale(0.98);
    }

    .btn-fav {
      background: var(--cream);
      color: var(--brown-dark);
      border: 1.5px solid var(--border);
      flex: 0 0 auto;
      width: 56px;
      padding: 0;
    }

    .btn-fav.active {
      background: rgba(231, 76, 60, 0.1);
      border-color: #E74C3C;
      color: #E74C3C;
    }

    /* –ö–Ω–æ–ø–∫–∞ —Å —Ä–∞—Å—Ç–µ–Ω–∏—è–º–∏ */
    .btn-plant {
      position: relative;
      background: linear-gradient(135deg, #82571c, #bd9952);
      color: white;
      overflow: hidden;
      height: 56px;
      flex: 1;
    }

    .btn-plant::before {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(135deg, rgba(255,255,255,0.2), transparent);
      opacity: 0;
      transition: opacity 0.3s;
    }

    .btn-plant:hover::before {
      opacity: 1;
    }

    .leaves {
      position: absolute;
      width: 100%;
      height: 100%;
      top: 0;
      left: 0;
      pointer-events: none;
      overflow: hidden;
    }

    .leaf {
      position: absolute;
      width: 20px;
      height: 20px;
      background: linear-gradient(135deg, var(--gold-light), var(--gold-pale));
      border-radius: 0 100% 0 100%;
      opacity: 0;
      transform: scale(0) rotate(0deg);
      transition: all 0.5s ease-out;
    }

    .btn-plant:hover .leaf,
    .btn-plant:focus .leaf {
      opacity: 0.8;
      transform: scale(1) rotate(45deg);
    }

    .leaf:nth-child(1) { left: 10%; top: 20%; transition-delay: 0s; }
    .leaf:nth-child(2) { left: 20%; top: 60%; transition-delay: 0.1s; width: 16px; height: 16px; }
    .leaf:nth-child(3) { right: 15%; top: 30%; transition-delay: 0.2s; width: 24px; height: 24px; }
    .leaf:nth-child(4) { right: 25%; top: 70%; transition-delay: 0.15s; width: 18px; height: 18px; }
    .leaf:nth-child(5) { left: 50%; top: 10%; transition-delay: 0.05s; width: 22px; height: 22px; }

    /* –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è */
    .bottom-nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(255, 249, 240, 0.98);
      backdrop-filter: blur(20px);
      border-top: 1px solid var(--border);
      padding: 8px 16px calc(8px + env(safe-area-inset-bottom));
      z-index: 100;
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    .nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 16px;
      border: none;
      background: none;
      color: var(--brown-light);
      font-size: 11px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      text-decoration: none;
    }

    .nav-item.active {
      color: var(--gold);
    }

    .nav-icon {
      font-size: 24px;
      line-height: 1;
    }

    .nav-badge {
      position: absolute;
      top: 4px;
      right: 8px;
      min-width: 18px;
      height: 18px;
      padding: 0 5px;
      background: #E74C3C;
      color: white;
      border-radius: 9px;
      font-size: 11px;
      font-weight: 700;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 2px solid var(--cream-light);
    }

    /* –ö–æ—Ä–∑–∏–Ω–∞ */
    .cart-sheet {
      position: fixed;
      inset: 0;
      z-index: 300;
      pointer-events: none;
      opacity: 0;
      transition: opacity 0.3s;
    }

    .cart-sheet.active {
      pointer-events: auto;
      opacity: 1;
    }

    .cart-overlay {
      position: absolute;
      inset: 0;
      background: rgba(44, 36, 22, 0.6);
      backdrop-filter: blur(4px);
    }

    .cart-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--cream-light);
      border-radius: var(--radius-lg) var(--radius-lg) 0 0;
      max-height: 85vh;
      transform: translateY(100%);
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      display: flex;
      flex-direction: column;
    }

    .cart-sheet.active .cart-content {
      transform: translateY(0);
    }

    .cart-header {
      padding: 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .cart-title {
      font-family: 'Playfair Display', serif;
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }

    .cart-items {
      flex: 1;
      overflow-y: auto;
      padding: 16px;
    }

    .cart-item {
      display: flex;
      gap: 12px;
      padding: 12px;
      background: var(--cream);
      border-radius: var(--radius-md);
      margin-bottom: 12px;
      align-items: center;
    }

    .cart-item-image {
      width: 60px;
      height: 60px;
      border-radius: var(--radius-sm);
      object-fit: cover;
      background: linear-gradient(135deg, #E2D4BD, #F0E6C8);
    }

    .cart-item-info {
      flex: 1;
    }

    .cart-item-name {
      font-weight: 600;
      font-size: 14px;
      margin-bottom: 4px;
    }

    .cart-item-variant {
      font-size: 12px;
      color: var(--brown-light);
    }

    .cart-item-price {
      font-weight: 700;
      color: var(--gold);
      font-size: 14px;
    }

    .cart-item-controls {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .qty-btn {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      border: 1.5px solid var(--border);
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      font-weight: 600;
      color: var(--brown-dark);
      transition: all 0.2s;
    }

    .qty-btn:active {
      background: var(--gold);
      color: white;
      border-color: var(--gold);
    }

    .cart-footer {
      padding: 16px;
      border-top: 1px solid var(--border);
      background: var(--cream-light);
    }

    .cart-summary {
      margin-bottom: 16px;
    }

    .summary-row {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .summary-row.discount {
      color: #27AE60;
    }

    .summary-row.total {
      font-size: 18px;
      font-weight: 700;
      color: var(--brown-dark);
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px dashed var(--border);
    }

    .form-group {
      margin-bottom: 12px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--brown-medium);
      margin-bottom: 6px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      border: 1.5px solid var(--border);
      border-radius: var(--radius-sm);
      font-size: 15px;
      font-family: inherit;
      background: white;
      color: var(--brown-dark);
      transition: border-color 0.2s;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--gold);
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* –õ–æ–∞–¥–µ—Ä */
    .loader-overlay {
      position: fixed;
      inset: 0;
      background: rgba(247, 240, 227, 0.95);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s;
    }

    .loader-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .loader-cubes {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
    }

    .loader-cube {
      width: 24px;
      height: 24px;
      background: linear-gradient(135deg, #82571c, #bd9952);
      border-radius: 4px;
      animation: cube-fall 1.5s infinite ease-in-out;
    }

    .loader-cube:nth-child(1) { animation-delay: 0s; }
    .loader-cube:nth-child(2) { animation-delay: 0.2s; }
    .loader-cube:nth-child(3) { animation-delay: 0.4s; }

    @keyframes cube-fall {
      0%, 100% { transform: translateY(0) rotate(0deg); opacity: 1; }
      50% { transform: translateY(30px) rotate(180deg); opacity: 0.5; }
    }

    .loader-text {
      font-size: 16px;
      color: var(--brown-medium);
      font-weight: 500;
    }

    .loader-ground {
      width: 120px;
      height: 4px;
      background: #E2D4BD;
      border-radius: 2px;
      margin-top: 10px;
    }

    /* Toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
    .toast-container {
      position: fixed;
      top: 80px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 500;
      display: flex;
      flex-direction: column;
      gap: 8px;
      pointer-events: none;
    }

    .toast {
      background: var(--brown-dark);
      color: white;
      padding: 12px 24px;
      border-radius: var(--radius-full);
      font-size: 14px;
      font-weight: 500;
      box-shadow: var(--shadow-strong);
      opacity: 0;
      transform: translateY(-20px);
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .toast.show {
      opacity: 1;
      transform: translateY(0);
    }

    /* –ü—É—Å—Ç—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è */
    .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: var(--brown-light);
    }

    .empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
      opacity: 0.5;
    }

    .empty-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--brown-dark);
      margin-bottom: 8px;
    }

    /* Pull to refresh –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä */
    .ptr-indicator {
      position: absolute;
      top: -50px;
      left: 50%;
      transform: translateX(-50%);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: var(--cream-light);
      box-shadow: var(--shadow-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      transition: transform 0.3s;
    }

    .ptr-loading {
      animation: rotate 1s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è –¥–µ—Å–∫—Ç–æ–ø–∞ */
    @media (min-width: 1024px) {
      .app-header, .search-container {
        left: 280px;
      }
      
      .sidebar {
        position: fixed;
        left: 0;
        top: 0;
        bottom: 0;
        width: 280px;
        background: var(--cream-light);
        border-right: 1px solid var(--border);
        padding: 24px;
        overflow-y: auto;
        z-index: 90;
      }
      
      .sidebar-logo {
        font-family: 'Playfair Display', serif;
        font-size: 28px;
        font-weight: 700;
        margin-bottom: 32px;
        display: flex;
        align-items: center;
        gap: 12px;
      }
      
      .sidebar-categories {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }
      
      .sidebar-category {
        padding: 12px 16px;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.2s;
        font-weight: 500;
        color: var(--brown-medium);
      }
      
      .sidebar-category:hover, .sidebar-category.active {
        background: linear-gradient(135deg, var(--gold), #B8954A);
        color: white;
      }
      
      .main-content {
        margin-left: 280px;
        padding-top: 120px;
      }
      
      .categories-section {
        display: none;
      }
    }

    @media (max-width: 1023px) {
      .sidebar {
        display: none;
      }
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ –∫–æ—Ä–∑–∏–Ω—É */
    @keyframes flyToCart {
      0% {
        transform: scale(1) translate(0, 0);
        opacity: 1;
      }
      100% {
        transform: scale(0.2) translate(var(--cart-x), var(--cart-y));
        opacity: 0;
      }
    }

    .flying-item {
      position: fixed;
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold), #B8954A);
      z-index: 1000;
      pointer-events: none;
      animation: flyToCart 0.6s ease-in forwards;
    }

    /* –°–∫—Ä—ã—Ç—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã */
    .hidden { display: none !important; }
  </style>
</head>
<body>
  <!-- –õ–æ–∞–¥–µ—Ä -->
  <div class="loader-overlay" id="loader">
    <div class="loader-cubes">
      <div class="loader-cube"></div>
      <div class="loader-cube"></div>
      <div class="loader-cube"></div>
    </div>
    <div class="loader-text" id="loader-text">–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑...</div>
    <div class="loader-ground"></div>
  </div>

  <!-- Toast –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="toast-container" id="toast-container"></div>

  <!-- –°–∞–π–¥–±–∞—Ä (—Ç–æ–ª—å–∫–æ –¥–µ—Å–∫—Ç–æ–ø) -->
  <aside class="sidebar">
    <div class="sidebar-logo">
      <div class="logo-icon">üßÄ</div>
      –°—ã—Ä–æ–º–∞–Ω–∏—è
    </div>
    <nav class="sidebar-categories" id="sidebar-categories"></nav>
  </aside>

  <!-- –®–∞–ø–∫–∞ -->
  <header class="app-header">
    <div class="header-content">
      <a href="#" class="logo" onclick="showHome(); return false;">
        <div class="logo-icon">üßÄ</div>
        –°—ã—Ä–æ–º–∞–Ω–∏—è
      </a>
      <div class="user-avatar" id="user-avatar">
        <span>–°</span>
      </div>
    </div>
  </header>

  <!-- –ü–æ–∏—Å–∫ -->
  <div class="search-container" id="search-container">
    <div class="search-box">
      <span class="search-icon">üîç</span>
      <input type="search" class="search-input" id="search-input" placeholder="–ù–∞–π—Ç–∏ —Å—ã—Ä..." autocomplete="off">
    </div>
  </div>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main-content" id="main-content">
    <!-- –•–∏—Ç—ã -->
    <section class="hits-section" id="hits-section">
      <div class="section-header">
        <h2 class="section-title">–•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂</h2>
      </div>
      <div class="hits-scroll" id="hits-scroll"></div>
    </section>

    <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–º–æ–±–∏–ª—å–Ω—ã–µ) -->
    <div class="categories-section" id="categories-section">
      <div class="categories-scroll" id="categories-scroll"></div>
    </div>

    <!-- –°–µ—Ç–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <div class="products-grid" id="products-grid"></div>
    
    <!-- –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
    <div class="empty-state hidden" id="empty-state">
      <div class="empty-icon">üîç</div>
      <div class="empty-title">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>
      <p>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>
    </div>
  </main>

  <!-- –ú–æ–¥–∞–ª–∫–∞ —Ç–æ–≤–∞—Ä–∞ -->
  <div class="modal-overlay" id="product-modal">
    <div class="product-modal">
      <div class="modal-header">
        <img class="modal-image" id="modal-image" src="" alt="">
        <button class="modal-close" onclick="closeProductModal()">√ó</button>
      </div>
      <div class="modal-body">
        <h2 class="modal-title" id="modal-title"></h2>
        <p class="modal-description" id="modal-description"></p>
        
        <!-- –í–∞—Ä–∏–∞–Ω—Ç—ã —Ç–æ–≤–∞—Ä–∞ (—Ç–∞–±—ã) -->
        <div class="variants-section hidden" id="variants-section">
          <div class="section-label">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∏–¥</div>
          <div class="variant-tabs" id="variant-tabs"></div>
        </div>

        <!-- –í–µ—Å -->
        <div class="weight-section" id="weight-section">
          <div class="section-label">–í–µ—Å</div>
          <div class="weight-pills" id="weight-pills"></div>
        </div>

        <!-- –°–≤–æ–π –≤–µ—Å -->
        <div class="custom-weight-section hidden" id="custom-weight-section">
          <div class="section-label">–°–≤–æ–π –≤–µ—Å (100–≥ - 1–∫–≥)</div>
          <input type="range" class="range-slider" id="weight-slider" min="100" max="1000" step="50" value="200">
          <div class="weight-input-row">
            <input type="number" class="weight-input" id="weight-input" min="100" max="1000" step="50" value="200">
            <span>–≥—Ä–∞–º–º</span>
          </div>
        </div>

        <!-- –¶–µ–Ω–∞ -->
        <div class="price-section">
          <span class="price-main" id="modal-price">0 ‚ÇΩ</span>
          <span class="price-old hidden" id="modal-old-price"></span>
          <span class="price-discount hidden" id="modal-discount"></span>
        </div>

        <!-- –î–µ–π—Å—Ç–≤–∏—è -->
        <div class="modal-actions">
          <button class="btn btn-fav" id="modal-fav-btn" onclick="toggleModalFavorite()">
            ‚ô°
          </button>
          <button class="btn btn-plant" id="add-to-cart-btn" onclick="addToCartFromModal()">
            <span class="leaves">
              <span class="leaf"></span>
              <span class="leaf"></span>
              <span class="leaf"></span>
              <span class="leaf"></span>
              <span class="leaf"></span>
            </span>
            –í –∫–æ—Ä–∑–∏–Ω—É
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
  <div class="cart-sheet" id="cart-sheet">
    <div class="cart-overlay" onclick="closeCart()"></div>
    <div class="cart-content">
      <div class="cart-header">
        <h2 class="cart-title">–ö–æ—Ä–∑–∏–Ω–∞</h2>
        <button class="modal-close" onclick="closeCart()">√ó</button>
      </div>
      <div class="cart-items" id="cart-items">
        <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è -->
      </div>
      <div class="cart-footer">
        <div class="cart-summary" id="cart-summary"></div>
        
        <div class="form-group">
          <label class="form-label">–ì–æ—Ä–æ–¥</label>
          <select class="form-select" id="checkout-city">
            <option value="–ü–µ–Ω–∑–∞">–ü–µ–Ω–∑–∞</option>
            <option value="–ú–æ—Å–∫–≤–∞">–ú–æ—Å–∫–≤–∞</option>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
          <input type="tel" class="form-input" id="checkout-phone" placeholder="+7 999 999-99-99">
        </div>
        
        <div class="form-group">
          <label class="form-label">–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</label>
          <textarea class="form-textarea" id="checkout-address" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤..."></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
          <textarea class="form-textarea" id="checkout-comment" placeholder="–ü–æ–∂–µ–ª–∞–Ω–∏—è –∫ –∑–∞–∫–∞–∑—É..."></textarea>
        </div>
        
        <div class="form-group">
          <label class="form-label">–ü—Ä–æ–º–æ–∫–æ–¥</label>
          <input type="text" class="form-input" id="checkout-promo" placeholder="–ï—Å–ª–∏ –µ—Å—Ç—å">
        </div>

        <button class="btn btn-plant" onclick="submitOrder()" style="width: 100%; margin-top: 8px;">
          <span class="leaves">
            <span class="leaf"></span>
            <span class="leaf"></span>
            <span class="leaf"></span>
            <span class="leaf"></span>
            <span class="leaf"></span>
          </span>
          –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑
        </button>
      </div>
    </div>
  </div>

  <!-- –ù–∏–∂–Ω—è—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
  <nav class="bottom-nav">
    <button class="nav-item active" onclick="showHome()">
      <span class="nav-icon">üè†</span>
      <span>–ì–ª–∞–≤–Ω–∞—è</span>
    </button>
    <button class="nav-item" onclick="showFavorites()">
      <span class="nav-icon">‚ô°</span>
      <span>–ò–∑–±—Ä–∞–Ω–Ω–æ–µ</span>
      <span class="nav-badge hidden" id="fav-badge">0</span>
    </button>
    <button class="nav-item" onclick="openCart()">
      <span class="nav-icon">üõí</span>
      <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
      <span class="nav-badge hidden" id="cart-badge">0</span>
    </button>
    <button class="nav-item" onclick="showProfile()">
      <span class="nav-icon">üë§</span>
      <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
    </button>
  </nav>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // ===== –ö–û–ù–°–¢–ê–ù–¢–´ =====
    const HAPTIC_ENABLED = false; // –ü–æ—Å—Ç–∞–≤—å true —á—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å –≤–∏–±—Ä–æ–æ—Ç–∫–ª–∏–∫
    
    const BACKEND = 'https://puzzlebot-webhook-handler1.onrender.com';
    const CURRENCY = 'RUB';
    const ROUND = Math.round;
    
    const DISCOUNT_THRESHOLDS = [
      { g: 500, rate: 0.05 },
      { g: 700, rate: 0.10 },
      { g: 1000, rate: 0.15 },
    ];
    
    const STORAGE_CART_KEY = 'syromania-cart-v2';
    const STORAGE_FAV_KEY = 'syromania-favorites-v2';
    const STORAGE_CHECKOUT_KEY = 'syromania-checkout-v2';
    
    const DEFAULT_IMG = 'https://static.tildacdn.com/tild3134-3861-4539-a363-646133333238/__.webp';
    
    // –ì—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤
    const GROUPS = [
      { id: 'all', title: '–í—Å–µ' },
      { id: 'brined', title: '–†–∞—Å—Å–æ–ª—å–Ω—ã–µ' },
      { id: 'soft', title: '–ú—è–≥–∫–∏–µ' },
      { id: 'hard', title: '–¢–≤—ë—Ä–¥—ã–µ' },
      { id: 'rolls', title: '–†—É–ª–µ—Ç—ã' },
      { id: 'dairy', title: '–ú–æ–ª–æ—á–∫–∞' },
      { id: 'sweets', title: '–°–ª–∞–¥–æ—Å—Ç–∏' },
      { id: 'bakery', title: '–í—ã–ø–µ—á–∫–∞' },
    ];
    
    const CHEESE_GROUP_IDS = new Set(['brined', 'soft', 'hard', 'rolls']);
    
    // –•–∏—Ç—ã –ø—Ä–æ–¥–∞–∂ (ID —Ç–æ–≤–∞—Ä–æ–≤)
    const HITS = [
      'spicy-klubok',
      'halloumi-tomato-paprika',
      'panir-herbs',
      'sandesh-combo',
      'barfi-sesame'
    ];
    
    // ===== –î–ê–ù–ù–´–ï –¢–û–í–ê–†–û–í =====
    // –û–±—ä–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –¥–ª—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –≤–∏–¥–∞–º–∏
    const PRODUCT_VARIANTS = {
      'sandesh-combo': {
        id: 'sandesh-combo',
        name: '–°–∞–Ω–¥–µ—à (–Ω–∞–±–æ—Ä)',
        group: 'sweets',
        pricePerUnit: 300,
        ico: 'üçÆ',
        description: '–ù–µ–∂–Ω—ã–π —Ç–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç. –ù–∞–±–æ—Ä –∏–∑ 3 –≤–∫—É—Å–æ–≤: –∞–ø–µ–ª—å—Å–∏–Ω–æ–≤—ã–π, —Å –≥—Ä–µ—Ü–∫–∏–º –æ—Ä–µ—Ö–æ–º, —Å –∫—ç—Ä–æ–±–æ–º. –í –∫–∞–∂–¥–æ–º –Ω–∞–±–æ—Ä–µ 5 —à—Ç.',
        img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-orange.webp',
        variants: [
          { id: 'sandesh-orange', name: '–ê–ø–µ–ª—å—Å–∏–Ω', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-orange.webp' },
          { id: 'sandesh-walnut', name: '–ì—Ä–µ—Ü–∫–∏–π –æ—Ä–µ—Ö', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-walnut.webp' },
          { id: 'sandesh-carob', name: '–ö—ç—Ä–æ–±', img: 'https://static.tildacdn.com/tild6135-6337-4266-b764-613565386238/_.webp' }
        ]
      },
      'halloumi-combo': {
        id: 'halloumi-combo',
        name: '–•–∞–ª–ª—É–º–∏',
        group: 'brined',
        pricePerKg: 2100,
        ico: 'üî•',
        description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏ –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –∏–ª–∏ –≥—Ä–∏–ª–µ ‚Äî –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ö—Ä—É—Å—Ç—è—â–∞—è –∫–æ—Ä–æ—á–∫–∞. –í–µ—Å –æ–¥–Ω–æ–π —à—Ç—É–∫–∏ ~225 –≥.',
        img: 'https://static.tildacdn.com/tild3161-6362-4130-b134-623331346238/halloumi.webp',
        pieceWeightGrams: 225,
        pieceWeightRangeText: '200‚Äì250 –≥',
        variants: [
          { id: 'halloumi', name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', pricePerKg: 1950, img: 'https://static.tildacdn.com/tild3161-6362-4130-b134-623331346238/halloumi.webp' },
          { id: 'halloumi-paprika-oregano', name: '–° –ø–∞–ø—Ä–∏–∫–æ–π', pricePerKg: 2100, img: 'https://static.tildacdn.com/tild3133-6165-4134-b335-396662633262/halloumi-paprika-ore.webp' },
          { id: 'halloumi-tomato-basil-garlic', name: '–¢–æ–º–∞—Ç-–±–∞–∑–∏–ª–∏–∫', pricePerKg: 2100, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/halloumi-tomato-basil-garlic.webp' },
          { id: 'halloumi-tomato-paprika', name: '–° –≤—è–ª–µ–Ω—ã–º–∏ —Ç–æ–º–∞—Ç–∞–º–∏', pricePerKg: 2100, img: 'https://static.tildacdn.com/tild3863-3030-4439-a439-653238303862/halloumi-tomato-papr.webp' }
        ]
      },
      'panir-combo': {
        id: 'panir-combo',
        name: '–ê–¥—ã–≥–µ–π—Å–∫–∏–π —Å—ã—Ä (–ø–∞–Ω–∏—Ä)',
        group: 'soft',
        pricePerKg: 1450,
        ico: 'üßÄ',
        description: '–û—á–µ–Ω—å –Ω–µ–∂–Ω—ã–π, –º—è–≥–∫–∏–π —Å—ã—Ä —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã.',
        img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-classic.webp',
        variants: [
          { id: 'panir-classic', name: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', pricePerKg: 1450, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-classic.webp' },
          { id: 'panir-herbs', name: '–° –∑–µ–ª–µ–Ω—å—é', pricePerKg: 1600, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-herbs.webp' },
          { id: 'panir-spicy', name: '–°–æ —Å–ø–µ—Ü–∏—è–º–∏', pricePerKg: 1650, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-spicy.webp' },
          { id: 'panir-smoked', name: '–ö–æ–ø—á—ë–Ω—ã–π', pricePerKg: 1700, img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-smoked.webp' }
        ]
      }
    };
    
    const PRODUCTS = [
      // –†–∞—Å—Å–æ–ª—å–Ω—ã–µ —Å—ã—Ä—ã
      { id: 'mozzarella', name: '–ú–æ—Ü–∞—Ä–µ–ª–ª–∞', group: 'brined', pricePerKg: 2000, ico: 'üßÄ', description: '–ù–∏—Ç–∏ –º–æ—Ü–∞—Ä–µ–ª–ª—ã –≤ –Ω–µ–∂–Ω–æ–π –æ–±–æ–ª–æ—á–∫–µ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/mozzarella.webp', pieceWeightGrams: 200 },
      { id: 'buratta', name: '–ë—É—Ä–∞—Ç—Ç–∞', group: 'brined', pricePerKg: 2100, ico: 'üßÄ', description: '–ú–µ—à–æ—á–µ–∫ –∏–∑ –º–æ—Ü–∞—Ä–µ–ª–ª—ã —Å –Ω–∞—á–∏–Ω–∫–æ–π –∏–∑ —Å—Ç—Ä–∞—á–∞—Ç–µ–ª–ª—ã. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG, pieceWeightGrams: 250 },
      { id: 'stracciatella', name: '–°—Ç—Ä–∞—á–∞—Ç–µ–ª–ª–∞', group: 'brined', pricePerKg: 2150, ico: 'üßÄ', description: '–ù–∏—Ç–∏ –º–æ—Ü–∞—Ä–µ–ª–ª—ã –≤ —Å–ª–∏–≤–∫–∞—Ö. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5‚Äì7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3832-6430-4462-b663-353438383930/stracciatella.webp' },
      { id: 'suluguni', name: '–°—É–ª—É–≥—É–Ω–∏', group: 'brined', pricePerKg: 1700, ico: 'üßÄ', description: '–£–º–µ—Ä–µ–Ω–Ω–æ —Å–æ–ª—ë–Ω—ã–π, —Å–ª–æ–∏—Å—Ç—ã–π –∏ —ç–ª–∞—Å—Ç–∏—á–Ω—ã–π. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3238-3866-4366-a436-623236363261/suluguni.webp' },
      { id: 'suluguni-smoked', name: '–°—É–ª—É–≥—É–Ω–∏ –∫–æ–ø—á—ë–Ω—ã–π', group: 'brined', pricePerKg: 1800, ico: 'üí®', description: '–° –ª—ë–≥–∫–æ–π –∫–æ–ø—á—ë–Ω–æ—Å—Ç—å—é, –ø–ª–æ—Ç–Ω–∞—è –∏ —ç–ª–∞—Å—Ç–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 30 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6435-3838-4463-b431-353765323333/suluguni-smoked.webp' },
      { id: 'imeretian', name: '–ò–º–µ—Ä–µ—Ç–∏–Ω—Å–∫–∏–π', group: 'brined', pricePerKg: 1500, ico: 'üßÄ', description: '–ü—Ä–µ–∫—Ä–∞—Å–Ω—ã–π —Ä–∞—Å—Å–æ–ª—å–Ω—ã–π —Å—ã—Ä, –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ –≤—Å–µ–º –±–ª—é–¥–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/imeretian.webp' },
      { id: 'imeretian-dill-garlic', name: '–ò–º–µ—Ä–µ—Ç–∏–Ω—Å–∫–∏–π —Å –∑–µ–ª–µ–Ω—å—é', group: 'brined', pricePerKg: 1600, ico: 'üßÑ', description: '–°–≤–µ–∂–∏–π —Ä–∞—Å—Å–æ–ª—å–Ω—ã–π —Å—ã—Ä —Å –∞—Ä–æ–º–∞—Ç–Ω–æ–π –∑–µ–ª–µ–Ω—å—é –∏ —á–µ—Å–Ω–æ–∫–æ–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6435-3539-4337-a561-386438636230/__.webp' },
      { id: 'halloumi-combo', name: '–•–∞–ª–ª—É–º–∏', group: 'brined', pricePerKg: 1950, ico: 'üî•', description: '–ò–¥–µ–∞–ª–µ–Ω –¥–ª—è –∂–∞—Ä–∫–∏ –Ω–∞ —Å–∫–æ–≤–æ—Ä–æ–¥–µ –∏–ª–∏ –≥—Ä–∏–ª–µ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3161-6362-4130-b134-623331346238/halloumi.webp', isCombo: true, comboKey: 'halloumi-combo' },
      { id: 'kosichka', name: '–°—ã—Ä –∫–æ—Å–∏—á–∫–∞', group: 'brined', pricePerKg: 1900, ico: 'ü•®', description: '–°–ª–µ–≥–∫–∞ —Å–æ–ª—ë–Ω—ã–π, –ø–æ–¥—Ö–æ–¥–∏—Ç –∫–æ –≤—Å–µ–º—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG, pieceWeightGrams: 200 },
      { id: 'kosichka-smoked', name: '–°—ã—Ä –∫–æ—Å–∏—á–∫–∞ –∫–æ–ø—á—ë–Ω–∞—è', group: 'brined', pricePerKg: 2000, ico: 'üí®', description: '–•–æ–ª–æ–¥–Ω–æ–µ –∫–æ–ø—á–µ–Ω–∏–µ, –ª—ë–≥–∫–∞—è —Å–æ–ª—ë–Ω–æ—Å—Ç—å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 30 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/kosichka-smoked.webp', pieceWeightGrams: 200 },
      { id: 'spicy-klubok', name: '–ü—Ä—è–Ω—ã–µ –∫–ª—É–±–æ—á–∫–∏', group: 'brined', pricePerKg: 1950, ico: 'üå∂Ô∏è', description: '–ù–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–∫—É—Å–Ω—ã–π —Å—ã—Ä, –Ω–µ —Å–∏–ª—å–Ω–æ —Å–æ–ª—ë–Ω—ã–π, –Ω—Ä–∞–≤–∏—Ç—Å—è –≤—Å–µ–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3463-6166-4665-a439-323264653939/spicy-klubok.webp', pieceWeightGrams: 150 },
      
      // –ú—è–≥–∫–∏–µ —Å—ã—Ä—ã
      { id: 'ricotta', name: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä (—Ä–∏–∫–æ—Ç—Ç–∞)', group: 'soft', pricePerKg: 1400, ico: 'ü•õ', description: '–ù–µ–∂–Ω—ã–π —Å—ã—Ä, –ø–æ–¥—Ö–æ–¥–∏—Ç –∏ –∫ –±—É—Ç–µ—Ä–±—Ä–æ–¥–∞–º, –∏ –∫ –±–ª—é–¥–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/ricotta.webp' },
      { id: 'ricotta-herbs', name: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π —Å—ã—Ä —Å –∑–µ–ª–µ–Ω—å—é', group: 'soft', pricePerKg: 1500, ico: 'üåø', description: '–ù–µ–∂–Ω—ã–π, —Å–≤–µ–∂–∏–π, —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π ‚Äî –ª—É—á—à–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å! –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/ricotta-herbs.webp' },
      { id: 'caciotta', name: '–ö–∞—á–æ—Ç—Ç–∞', group: 'soft', pricePerKg: 2200, ico: 'üßÄ', description: '–ú—è–≥–∫–∏–π –∏—Ç–∞–ª—å—è–Ω—Å–∫–∏–π —Å—ã—Ä. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6165-3265-4834-a236-366661346562/caciotta.webp' },
      { id: 'caciotta-fenugreek', name: '–ö–∞—á–æ—Ç—Ç–∞ —Å –ø–∞–∂–∏—Ç–Ω–∏–∫–æ–º', group: 'soft', pricePerKg: 2250, ico: 'üåø', description: '–° –æ—Ä–µ—Ö–æ–≤—ã–º –ø—Ä–∏–≤–∫—É—Å–æ–º –ø–∞–∂–∏—Ç–Ω–∏–∫–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'panir-combo', name: '–ê–¥—ã–≥–µ–π—Å–∫–∏–π —Å—ã—Ä (–ø–∞–Ω–∏—Ä)', group: 'soft', pricePerKg: 1450, ico: 'üßÄ', description: '–û—á–µ–Ω—å –Ω–µ–∂–Ω—ã–π, –º—è–≥–∫–∏–π —Å—ã—Ä —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/panir-classic.webp', isCombo: true, comboKey: 'panir-combo' },
      
      // –¢–≤—ë—Ä–¥—ã–µ —Å—ã—Ä—ã
      { id: 'hard-village', name: '–¢–≤—ë—Ä–¥—ã–π –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏–π —Å—ã—Ä', group: 'hard', pricePerKg: 1600, ico: 'üßÄ', description: '–¢–≤—ë—Ä–¥—ã–π –¥–µ—Ä–µ–≤–µ–Ω—Å–∫–∏–π —Å—ã—Ä –≥–æ—Ç–æ–≤–∏—Ç—Å—è –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –ø—Ä–∏–ø—Ä–∞–≤–∞–º–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/hard-village.webp' },
      { id: 'hard-smoked', name: '–¢–≤—ë—Ä–¥—ã–π –∫–æ–ø—á—ë–Ω—ã–π —Å—ã—Ä', group: 'hard', pricePerKg: 1800, ico: 'üí®', description: '–ì–æ—Ç–æ–≤–∏—Ç—Å—è –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞ —Å –ø—Ä–∏–ø—Ä–∞–≤–∞–º–∏, –æ–±–∂–∞—Ä–∏–≤–∞–µ—Ç—Å—è, –∑–∞—Ç–µ–º –∫–æ–ø—Ç–∏—Ç—Å—è. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 30 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6662-3930-4663-b132-316135626136/hard-smoked.webp' },
      
      // –†—É–ª–µ—Ç—ã
      { id: 'rolls-olives-walnut', name: '–°—ã—Ä–Ω—ã–π —Ä—É–ª–µ—Ç —Å –º–∞—Å–ª–∏–Ω–∞–º–∏', group: 'rolls', pricePerKg: 1700, ico: 'ü•ú', description: '–ú–æ–∂–Ω–æ –ø–æ–¥–∞—Ç—å –∫–∞–∫ –∑–∞–∫—É—Å–∫—É –∫ –ª—é–±–æ–º—É —Å—Ç–æ–ª—É. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/rolls-olives-walnut.webp' },
      { id: 'rolls-apricot-cedar', name: '–°—ã—Ä–Ω—ã–π —Ä—É–ª–µ—Ç —Å –∫—É—Ä–∞–≥–æ–π', group: 'rolls', pricePerKg: 1700, ico: 'üçë', description: '–°–ª–µ–≥–∫–∞ —Å–ª–∞–¥–∫–æ–≤–∞—Ç—ã–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–≤–æ—Ä–æ–∂–Ω–æ–º—É —Å—ã—Ä—É, –∫—É—Ä–∞–≥–µ –∏ –æ—Ä–µ—Ö–∞–º. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/rolls-apricot-cedar.webp' },
      
      // –ú–æ–ª–æ—á–∫–∞
      { id: 'milk', name: '–ú–æ–ª–æ–∫–æ', group: 'dairy', pricePerL: 150, ico: 'ü•õ', description: '–ú–æ–ª–æ–∫–æ –æ—Ç–±–æ—Ä–Ω–æ–µ —Ü–µ–ª—å–Ω–æ–µ, –æ—Ö–ª–∞–∂–¥—ë–Ω–Ω–æ–µ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'milk-topped', name: '–ú–æ–ª–æ–∫–æ —Ç–æ–ø–ª—ë–Ω–æ–µ', group: 'dairy', pricePerL: 250, ico: 'ü•õ', description: '–ù–∞—Å—Ç–æ—è—â–µ–µ —Ü–µ–ª—å–Ω–æ–µ —Ç–æ–ø–ª—ë–Ω–æ–µ –º–æ–ª–æ–∫–æ. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5‚Äì7 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3839-3163-4066-a633-306366346631/milk-topped.webp' },
      { id: 'yogurt', name: '–ô–æ–≥—É—Ä—Ç', group: 'dairy', pricePerL: 260, ico: 'ü•õ', description: '–°–∞–º—ã–π –Ω–∞—Å—Ç–æ—è—â–∏–π –π–æ–≥—É—Ä—Ç –∏–∑ –æ—Ç–±–æ—Ä–Ω–æ–≥–æ –º–æ–ª–æ–∫–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'ryazhenka', name: '–†—è–∂–µ–Ω–∫–∞', group: 'dairy', pricePerL: 280, ico: 'ü•õ', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è —Ä—è–∂–µ–Ω–∫–∞ –∏–∑ –º–æ–ª–æ–∫–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –¥–æ 5 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'misti-dahi', name: '–ú–∏—Å—Ç—Ö–∏-–î–∞—Ö–∏', group: 'dairy', pricePerL: 300, ico: 'ü•õ', description: '–ö–∏—Å–ª–æ–º–æ–ª–æ—á–Ω—ã–π –Ω–∞–ø–∏—Ç–æ–∫. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'whey', name: '–°—ã–≤–æ—Ä–æ—Ç–∫–∞', group: 'dairy', pricePerL: 60, ico: 'üíß', description: '–ú–æ–ª–æ—á–Ω—ã–π –Ω–∏–∑–∫–æ–∫–∞–ª–æ—Ä–∏–π–Ω—ã–π –ø—Ä–æ–¥—É–∫—Ç. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'cream', name: '–°–ª–∏–≤–∫–∏ (33‚Äì36%)', group: 'dairy', pricePerL: 1450, ico: 'ü•õ', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω—ã–µ —Å–≤–µ–∂–∏–µ —Å–ª–∏–≤–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3163-3665-4636-a537-303830323163/cream.webp' },
      { id: 'tvorog', name: '–¢–≤–æ—Ä–æ–≥', group: 'dairy', pricePerKg: 700, ico: 'ü•õ', description: '–¢–≤–æ—Ä–æ–∂–Ω—ã–π –Ω–µ–∂–Ω—ã–π –≤–∫—É—Å. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 3‚Äì5 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild3136-3730-4134-b466-613138343764/tvorog.webp' },
      { id: 'butter', name: '–°–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ (—à–∞—Ä–∏–∫)', group: 'dairy', pricePerKg: 2100, ico: 'üßà', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ —Å–ª–∏–≤–æ—á–Ω–æ–µ –º–∞—Å–ª–æ —Ä—É—á–Ω–æ–π —Ä–∞–±–æ—Ç—ã. –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π –≤–µ—Å ‚Äî 200 –≥.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/butter.webp', pieceWeightGrams: 200 },
      { id: 'ghee', name: '–¢–æ–ø–ª—ë–Ω–æ–µ –º–∞—Å–ª–æ (–ì–•–ò)', group: 'dairy', pricePerKg: 2900, ico: 'üßà', description: '–ñ–∏—Ä–Ω–æ—Å—Ç—å ~99%. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –∂–∞—Ä–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: –±–æ–ª—å—à–µ 10 –ª–µ—Ç.', img: DEFAULT_IMG },
      { id: 'condensed-milk', name: '–í–∞—Ä—ë–Ω–∞—è —Å–≥—É—â—ë–Ω–∫–∞', group: 'dairy', pricePerKg: 1000, ico: 'ü•õ', description: '–ù–∞—Ç—É—Ä–∞–ª—å–Ω–∞—è –≤–∞—Ä—ë–Ω–∞—è —Å–≥—É—â—ë–Ω–∫–∞, –≥—É—Å—Ç–∞—è –∏ –∫–∞—Ä–∞–º–µ–ª—å–Ω–∞—è. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 7 —Å—É—Ç–æ–∫.', img: DEFAULT_IMG },
      { id: 'tvorozhnaya-massa', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –º–∞—Å—Å–∞', group: 'dairy', pricePerKg: 850, ico: 'ü•õ', description: '–° –∏–∑—é–º–æ–º, —Ñ–∏–Ω–∏–∫–∞–º–∏, —á–µ—Ä–Ω–æ—Å–ª–∏–≤–æ–º –∏–ª–∏ –∫—É—Ä–∞–≥–æ–π. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 5 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6630-3237-4430-b461-313634376333/tvorozhnaya-massa_.webp', flavors: ['–° –∏–∑—é–º–æ–º', '–° —Ñ–∏–Ω–∏–∫–∞–º–∏', '–° —á–µ—Ä–Ω–æ—Å–ª–∏–≤–æ–º', '–° –∫—É—Ä–∞–≥–æ–π'] },
      
      // –°–ª–∞–¥–æ—Å—Ç–∏
      { id: 'sandesh-combo', name: '–°–∞–Ω–¥–µ—à', group: 'sweets', pricePerUnit: 300, ico: 'üçÆ', description: '–ù–µ–∂–Ω—ã–π —Ç–≤–æ—Ä–æ–∂–Ω—ã–π –¥–µ—Å–µ—Ä—Ç. –ù–∞–±–æ—Ä –∏–∑ 5 —à—Ç.', img: 'https://raw.githubusercontent.com/youmyloving/syr/main/sandesh-orange.webp', isCombo: true, comboKey: 'sandesh-combo' },
      { id: 'barfi-classic', name: '–ë—É—Ä—Ñ–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π', group: 'sweets', pricePerUnit: 350, ico: 'üçÆ', description: '–ù–µ–∂–Ω—ã–π –º–æ–ª–æ—á–Ω—ã–π –¥–µ—Å–µ—Ä—Ç. –í –Ω–∞–±–æ—Ä–µ 5 —à—Ç.', img: 'https://static.tildacdn.com/tild3430-3231-4562-b164-366638313434/barfi-classic.webp' },
      { id: 'barfi-hazelnut', name: '–ë—É—Ä—Ñ–∏ —Å —Ñ—É–Ω–¥—É–∫–æ–º', group: 'sweets', pricePerUnit: 350, ico: 'üçÆ', description: '–ë—É—Ä—Ñ–∏ —Å —Ñ—É–Ω–¥—É–∫–æ–º, 5 —à—Ç –≤ –Ω–∞–±–æ—Ä–µ.', img: 'https://static.tildacdn.com/tild3065-3332-4466-a536-353130343264/barfi-hazelnut.webp' },
      { id: 'barfi-sesame', name: '–ë—É—Ä—Ñ–∏ –∫—É–Ω–∂—É—Ç–Ω—ã–π', group: 'sweets', pricePerUnit: 490, ico: 'üçÆ', description: '–ë—É—Ä—Ñ–∏ —Å –∫—É–Ω–∂—É—Ç–æ–º, 7 —à—Ç –≤ –Ω–∞–±–æ—Ä–µ.', img: 'https://static.tildacdn.com/tild3439-6135-4861-a531-316233303166/_.webp' },
      { id: 'halva', name: '–•–∞–ª–≤–∞', group: 'sweets', pricePerUnit: 200, ico: 'üçØ', description: '–°–∞–º–∞—è –Ω–∞—Å—Ç–æ—è—â–∞—è —Ö–∞–ª–≤–∞. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 14 –¥–Ω–µ–π.', img: 'https://static.tildacdn.com/tild3566-6566-4464-b531-306364646164/photo.webp' },
      { id: 'potato-cake-5', name: '–ü–∏—Ä–æ–∂–Ω–æ–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª (5 —à—Ç)', group: 'sweets', pricePerUnit: 400, ico: 'üç∞', description: '–î–æ–º–∞—à–Ω–∏–µ –ø–∏—Ä–æ–∂–Ω—ã–µ –∏–∑ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π –º—É–∫–∏. –í –∫–æ—Ä–æ–±–∫–µ 5 —à—Ç.', img: 'https://static.tildacdn.com/tild3961-6133-4632-b162-396333663962/potato-cake-2.webp' },
      { id: 'potato-cake-2', name: '–ü–∏—Ä–æ–∂–Ω–æ–µ ¬´–ö–∞—Ä—Ç–æ—à–∫–∞¬ª (2 —à—Ç)', group: 'sweets', pricePerUnit: 190, ico: 'üç∞', description: '–î–æ–º–∞—à–Ω–∏–µ –ø–∏—Ä–æ–∂–Ω—ã–µ (2 —à—Ç).', img: 'https://static.tildacdn.com/tild3961-6133-4632-b162-396333663962/potato-cake-2.webp' },
      
      // –í—ã–ø–µ—á–∫–∞
      { id: 'cookies-tvorog', name: '–ü–µ—á–µ–Ω—å–µ —Ç–≤–æ—Ä–æ–∂–Ω–æ–µ', group: 'bakery', pricePerKg: 600, ico: 'üç™', description: '–ú—è–≥–∫–æ–µ –¥–æ–º–∞—à–Ω–µ–µ –ø–µ—á–µ–Ω—å–µ –Ω–∞ —Ç–≤–æ—Ä–æ–≥–µ.', img: DEFAULT_IMG },
      { id: 'cookies-oat', name: '–ü–µ—á–µ–Ω—å–µ –æ–≤—Å—è–Ω–æ–µ', group: 'bakery', pricePerKg: 600, ico: 'üç™', description: '–û–≤—Å—è–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ –∫ —á–∞—é.', img: DEFAULT_IMG },
      { id: 'cookies-nut', name: '–û—Ä–µ—Ö–æ–≤—ã–µ –ø–∞–ª—å—á–∏–∫–∏', group: 'bakery', pricePerKg: 700, ico: 'üç™', description: '–ü–µ—á–µ–Ω—å–µ —Å –æ—Ä–µ—Ö–∞–º–∏ ‚Äî —Ö—Ä—É—Å—Ç—è—â–∏–µ –ø–∞–ª—å—á–∏–∫–∏.', img: 'https://static.tildacdn.com/tild3035-6230-4434-b363-303434366630/cookies-nut.webp' },
      { id: 'cookies-carob', name: '–ü–µ—á–µ–Ω—å–µ –∫—ç—Ä–æ–±–æ–≤–æ–µ', group: 'bakery', pricePerKg: 600, ico: 'üç™', description: '–ü–µ—á–µ–Ω—å–µ —Å –∫—ç—Ä–æ–±–æ–º –≤–º–µ—Å—Ç–æ –∫–∞–∫–∞–æ.', img: DEFAULT_IMG },
      { id: 'cookies-sandy', name: '–ü–µ—á–µ–Ω—å–µ –ø–µ—Å–æ—á–Ω–æ–µ', group: 'bakery', pricePerKg: 600, ico: 'üç™', description: '–†–∞—Å—Å—ã–ø—á–∞—Ç–æ–µ –ø–µ—Å–æ—á–Ω–æ–µ –ø–µ—á–µ–Ω—å–µ.', img: DEFAULT_IMG },
      { id: 'muffin-plain', name: '–ö–µ–∫—Å—ã –æ–±—ã—á–Ω—ã–µ', group: 'bakery', pricePerKg: 500, ico: 'üßÅ', description: '–î–æ–º–∞—à–Ω–∏–µ –∫–µ–∫—Å—ã.', img: DEFAULT_IMG },
      { id: 'muffin-carob', name: '–ö–µ–∫—Å—ã —Å –∫—ç—Ä–æ–±–æ–º', group: 'bakery', pricePerKg: 550, ico: 'üßÅ', description: '–ö–µ–∫—Å—ã —Å –∫—ç—Ä–æ–±–æ–º.', img: DEFAULT_IMG },
      { id: 'muffin-raisin', name: '–ö–µ–∫—Å—ã —Å –∏–∑—é–º–æ–º', group: 'bakery', pricePerKg: 550, ico: 'üßÅ', description: '–ö–µ–∫—Å—ã —Å –∏–∑—é–º–æ–º.', img: 'https://static.tildacdn.com/tild3465-3162-4436-a235-363763383339/muffin-raisin.webp' },
      { id: 'casserole-plain', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞', group: 'bakery', pricePerUnit: 260, ico: 'üçÆ', description: '–î–æ–º–∞—à–Ω—è—è —Ç–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞.', img: DEFAULT_IMG },
      { id: 'casserole-raisin', name: '–¢–≤–æ—Ä–æ–∂–Ω–∞—è –∑–∞–ø–µ–∫–∞–Ω–∫–∞ —Å –∏–∑—é–º–æ–º', group: 'bakery', pricePerUnit: 260, ico: 'üçÆ', description: '–ó–∞–ø–µ–∫–∞–Ω–∫–∞ —Å –∏–∑—é–º–æ–º.', img: DEFAULT_IMG },
      { id: 'crazy-cake', name: '–°—É–º–∞—Å—à–µ–¥—à–∏–π –ø–∏—Ä–æ–≥', group: 'bakery', pricePerUnit: 600, ico: 'üç∞', description: '–î–æ–º–∞—à–Ω–∏–π –ø–∏—Ä–æ–≥ –∫ —á–∞—é.', img: DEFAULT_IMG },
      { id: 'coconut-kuchen-1kg', name: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ 1 –∫–≥', group: 'bakery', pricePerUnit: 1800, ico: 'üç∞', description: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ (—Ñ–æ—Ä–º–∞ ~1 –∫–≥).', img: DEFAULT_IMG },
      { id: 'coconut-kuchen-05kg', name: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ 0.5 –∫–≥', group: 'bakery', pricePerUnit: 1000, ico: 'üç∞', description: '–ö–æ–∫–æ—Å–æ–≤—ã–π –ø–∏—Ä–æ–≥ (—Ñ–æ—Ä–º–∞ ~0.5 –∫–≥).', img: DEFAULT_IMG },
      { id: 'napoleon-1kg', name: '–¢–æ—Ä—Ç ¬´–ù–∞–ø–æ–ª–µ–æ–Ω¬ª 1 –∫–≥', group: 'bakery', pricePerUnit: 1300, ico: 'üç∞', description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ù–∞–ø–æ–ª–µ–æ–Ω (–æ–∫–æ–ª–æ 1 –∫–≥).', img: DEFAULT_IMG },
      { id: 'napoleon-05kg', name: '–¢–æ—Ä—Ç ¬´–ù–∞–ø–æ–ª–µ–æ–Ω¬ª 0.5 –∫–≥', group: 'bakery', pricePerUnit: 750, ico: 'üç∞', description: '–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ù–∞–ø–æ–ª–µ–æ–Ω (–æ–∫–æ–ª–æ 0.5 –∫–≥).', img: DEFAULT_IMG },
      { id: 'apple-pie', name: '–Ø–±–ª–æ—á–Ω—ã–π –ø–∏—Ä–æ–≥', group: 'bakery', pricePerUnit: 560, ico: 'ü•ß', description: '–î–æ–º–∞—à–Ω–∏–π —è–±–ª–æ—á–Ω—ã–π –ø–∏—Ä–æ–≥.', img: DEFAULT_IMG },
      { id: 'bliny-10', name: '–ë–ª–∏–Ω—ã (10 —à—Ç)', group: 'bakery', pricePerUnit: 330, ico: 'ü•û', description: '–¢–æ–Ω–∫–∏–µ –±–ª–∏–Ω—á–∏–∫–∏, 10 —à—Ç.', img: DEFAULT_IMG },
      { id: 'bliny-5', name: '–ë–ª–∏–Ω—ã (5 —à—Ç)', group: 'bakery', pricePerUnit: 220, ico: 'ü•û', description: '–¢–æ–Ω–∫–∏–µ –±–ª–∏–Ω—á–∏–∫–∏, 5 —à—Ç.', img: DEFAULT_IMG },
      { id: 'bliny-tvorog-5', name: '–ë–ª–∏–Ω—ã —Å —Ç–≤–æ—Ä–æ–≥–æ–º (5 —à—Ç)', group: 'bakery', pricePerUnit: 300, ico: 'ü•û', description: '–ë–ª–∏–Ω—ã —Å –Ω–∞—á–∏–Ω–∫–æ–π –∏–∑ —Ç–≤–æ—Ä–æ–≥–∞.', img: DEFAULT_IMG },
      { id: 'syrniki-10', name: '–°—ã—Ä–Ω–∏–∫–∏ (10 —à—Ç)', group: 'bakery', pricePerUnit: 520, ico: 'ü•û', description: '–î–æ–º–∞—à–Ω–∏–µ —Å—ã—Ä–Ω–∏–∫–∏, 10 —à—Ç.', img: DEFAULT_IMG },
      { id: 'syrniki-5', name: '–°—ã—Ä–Ω–∏–∫–∏ (5 —à—Ç)', group: 'bakery', pricePerUnit: 280, ico: 'ü•û', description: '–î–æ–º–∞—à–Ω–∏–µ —Å—ã—Ä–Ω–∏–∫–∏, 5 —à—Ç.', img: DEFAULT_IMG },
      { id: 'chapati-10', name: '–ß–∞–ø–∞—Ç–∏ (10 —à—Ç)', group: 'bakery', pricePerUnit: 270, ico: 'ü´ì', description: '–ß–∞–ø–∞—Ç–∏ –∏–∑ –ø—à–µ–Ω–∏—á–Ω–æ–π –º—É–∫–∏. –°—Ä–æ–∫ —Ö—Ä–∞–Ω–µ–Ω–∏—è: 2 —Å—É—Ç–æ–∫.', img: 'https://static.tildacdn.com/tild6332-6239-4538-b839-356132356236/chapati-10.webp' },
      { id: 'chapati-wholewheat-10', name: '–ß–∞–ø–∞—Ç–∏ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤—ã–µ (10 —à—Ç)', group: 'bakery', pricePerUnit: 320, ico: 'ü´ì', description: '–ß–∞–ø–∞—Ç–∏ –∏–∑ —Ü–µ–ª—å–Ω–æ–∑–µ—Ä–Ω–æ–≤–æ–π –º—É–∫–∏.', img: DEFAULT_IMG },
    ];
    
    // –ü—Ä–∞–≤–∏–ª–∞ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º 1000–≥
    const VARIANT_RULES = {
      'mozzarella': { type: 'fixed', options: ['1 —à—Ç (‚âà200 –≥)'] },
      'buratta': { type: 'fixed', options: ['1 —à—Ç (‚âà250 –≥)'] },
      'halloumi-combo': { type: 'fixed', options: ['1 —à—Ç (‚âà225 –≥)'] },
      'kosichka': { type: 'fixed', options: ['1 —à—Ç (‚âà200 –≥)'] },
      'kosichka-smoked': { type: 'fixed', options: ['1 —à—Ç (‚âà200 –≥)'] },
      'spicy-klubok': { type: 'fixed', options: ['1 —à—Ç (‚âà150 –≥)'] },
      
      'milk': { type: 'fixed', options: ['0.5 –ª', '1 –ª'] },
      'milk-topped': { type: 'fixed', options: ['0.5 –ª', '1 –ª'] },
      'yogurt': { type: 'fixed', options: ['0.5 –ª', '1 –ª'] },
      'ryazhenka': { type: 'fixed', options: ['0.5 –ª', '1 –ª'] },
      'misti-dahi': { type: 'fixed', options: ['0.5 –ª', '1 –ª'] },
      'whey': { type: 'fixed', options: ['1 –ª'] },
      'cream': { type: 'fixed', options: ['0.2 –ª', '0.5 –ª', '1 –ª'] },
      
      'tvorog': { type: 'weight', unit: '–≥', step: 250, min: 250, max: 1000 },
      'tvorozhnaya-massa': { type: 'weight', unit: '–≥', step: 100, min: 200, max: 1000 },
      'condensed-milk': { type: 'weight', unit: '–≥', step: 100, min: 200, max: 1000 },
      
      'butter': { type: 'fixed', options: ['1 —à—Ç (‚âà200 –≥)'] },
      'ghee': { type: 'fixed', options: ['200 –≥', '500 –≥', '1000 –≥'] },
      
      'sandesh-combo': { type: 'fixed', options: ['1 –Ω–∞–±–æ—Ä (5 —à—Ç)'] },
      'barfi-classic': { type: 'fixed', options: ['1 –Ω–∞–±–æ—Ä (5 —à—Ç)'] },
      'barfi-hazelnut': { type: 'fixed', options: ['1 –Ω–∞–±–æ—Ä (5 —à—Ç)'] },
      'barfi-sesame': { type: 'fixed', options: ['1 –Ω–∞–±–æ—Ä (7 —à—Ç)'] },
      'halva': { type: 'fixed', options: ['0.2 –∫–≥'] },
      'potato-cake-5': { type: 'fixed', options: ['5 —à—Ç'] },
      'potato-cake-2': { type: 'fixed', options: ['2 —à—Ç'] },
      
      'cookies-tvorog': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'cookies-oat': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'cookies-nut': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'cookies-carob': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'cookies-sandy': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      
      'muffin-plain': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'muffin-carob': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      'muffin-raisin': { type: 'weight', unit: '–≥', step: 50, min: 200, max: 1000 },
      
      'casserole-plain': { type: 'fixed', options: ['1 —à—Ç'] },
      'casserole-raisin': { type: 'fixed', options: ['1 —à—Ç'] },
      'crazy-cake': { type: 'fixed', options: ['1 —à—Ç'] },
      'coconut-kuchen-1kg': { type: 'fixed', options: ['1 —Ç–æ—Ä—Ç (1 –∫–≥)'] },
      'coconut-kuchen-05kg': { type: 'fixed', options: ['1 —Ç–æ—Ä—Ç (0.5 –∫–≥)'] },
      'napoleon-1kg': { type: 'fixed', options: ['1 —Ç–æ—Ä—Ç (1 –∫–≥)'] },
      'napoleon-05kg': { type: 'fixed', options: ['1 —Ç–æ—Ä—Ç (0.5 –∫–≥)'] },
      'apple-pie': { type: 'fixed', options: ['1 –ø–∏—Ä–æ–≥'] },
      
      'bliny-10': { type: 'fixed', options: ['10 —à—Ç'] },
      'bliny-5': { type: 'fixed', options: ['5 —à—Ç'] },
      'bliny-tvorog-5': { type: 'fixed', options: ['5 —à—Ç'] },
      'syrniki-10': { type: 'fixed', options: ['10 —à—Ç'] },
      'syrniki-5': { type: 'fixed', options: ['5 —à—Ç'] },
      'chapati-10': { type: 'fixed', options: ['10 —à—Ç'] },
      'chapati-wholewheat-10': { type: 'fixed', options: ['10 —à—Ç'] },
    };
    
    // ===== –°–û–°–¢–û–Ø–ù–ò–ï =====
    let cart = [];
    let favorites = new Set();
    let currentCategory = 'all';
    let currentProduct = null;
    let currentVariant = null;
    let selectedWeight = 200;
    let selectedVariantIndex = 0;
    let checkoutState = { phone: '', address: '', comment: '', promo: '', city: '–ü–µ–Ω–∑–∞' };
    
    // ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
    document.addEventListener('DOMContentLoaded', init);
    
    function init() {
      loadState();
      setupTelegram();
      renderCategories();
      renderHits();
      renderProducts();
      updateUI();
      setupEventListeners();
      
      // –°–∫—Ä–æ–ª–ª –¥–ª—è –ø–æ–∏—Å–∫–∞
      window.addEventListener('scroll', () => {
        const searchContainer = document.getElementById('search-container');
        if (window.scrollY > 10) {
          searchContainer.classList.add('scrolled');
        } else {
          searchContainer.classList.remove('scrolled');
        }
      });
    }
    
    function setupTelegram() {
      if (window.Telegram?.WebApp) {
        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.expand();
        
        const user = tg.initDataUnsafe?.user;
        if (user) {
          const avatar = document.getElementById('user-avatar');
          const initial = (user.first_name || user.username || 'U').charAt(0).toUpperCase();
          avatar.innerHTML = user.photo_url 
            ? `<img src="${user.photo_url}" alt="" onerror="this.parentElement.innerHTML='<span>${initial}</span>'">`
            : `<span>${initial}</span>`;
        }
      }
    }
    
    function loadState() {
      try {
        const savedCart = localStorage.getItem(STORAGE_CART_KEY);
        if (savedCart) cart = JSON.parse(savedCart);
        
        const savedFav = localStorage.getItem(STORAGE_FAV_KEY);
        if (savedFav) favorites = new Set(JSON.parse(savedFav));
        
        const savedCheckout = localStorage.getItem(STORAGE_CHECKOUT_KEY);
        if (savedCheckout) checkoutState = { ...checkoutState, ...JSON.parse(savedCheckout) };
      } catch (e) {
        console.error('Error loading state:', e);
      }
    }
    
    function saveState() {
      try {
        localStorage.setItem(STORAGE_CART_KEY, JSON.stringify(cart));
        localStorage.setItem(STORAGE_FAV_KEY, JSON.stringify([...favorites]));
        localStorage.setItem(STORAGE_CHECKOUT_KEY, JSON.stringify(checkoutState));
      } catch (e) {
        console.error('Error saving state:', e);
      }
    }
    
    // ===== –†–ï–ù–î–ï–†–ò–ù–ì =====
    function renderCategories() {
      // –ú–æ–±–∏–ª—å–Ω—ã–µ —Ç–∞–±—ã
      const scroll = document.getElementById('categories-scroll');
      scroll.innerHTML = GROUPS.map(g => `
        <button class="category-tab ${g.id === currentCategory ? 'active' : ''}" 
                onclick="setCategory('${g.id}')">
          ${g.title}
        </button>
      `).join('');
      
      // –î–µ—Å–∫—Ç–æ–ø–Ω—ã–π —Å–∞–π–¥–±–∞—Ä
      const sidebar = document.getElementById('sidebar-categories');
      if (sidebar) {
        sidebar.innerHTML = GROUPS.map(g => `
          <div class="sidebar-category ${g.id === currentCategory ? 'active' : ''}" 
               onclick="setCategory('${g.id}')">
            ${g.title}
          </div>
        `).join('');
      }
    }
    
    function renderHits() {
      const container = document.getElementById('hits-scroll');
      const hitProducts = HITS.map(id => {
        if (id === 'sandesh-combo') return PRODUCT_VARIANTS['sandesh-combo'];
        return PRODUCTS.find(p => p.id === id);
      }).filter(Boolean);
      
      container.innerHTML = hitProducts.map(p => `
        <div class="hit-card" onclick="openProductModal('${p.id}')">
          <div class="hit-badge">–•–ò–¢</div>
          <img class="hit-image" src="${p.img || DEFAULT_IMG}" alt="" loading="lazy">
          <div class="hit-content">
            <div class="hit-name">${p.name}</div>
            <div class="hit-price">${getPriceText(p)}</div>
          </div>
        </div>
      `).join('');
    }
    
    function renderProducts() {
      const grid = document.getElementById('products-grid');
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      
      let filtered = PRODUCTS.filter(p => {
        const matchesCategory = currentCategory === 'all' || p.group === currentCategory;
        const matchesSearch = p.name.toLowerCase().includes(searchTerm);
        return matchesCategory && matchesSearch;
      });
      
      // –°–∫—Ä—ã–≤–∞–µ–º —Å–µ–∫—Ü–∏—é —Ö–∏—Ç–æ–≤ –µ—Å–ª–∏ –µ—Å—Ç—å –ø–æ–∏—Å–∫ –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä
      const hitsSection = document.getElementById('hits-section');
      const emptyState = document.getElementById('empty-state');
      
      if (searchTerm || currentCategory !== 'all') {
        hitsSection.classList.add('hidden');
      } else {
        hitsSection.classList.remove('hidden');
      }
      
      if (filtered.length === 0) {
        grid.innerHTML = '';
        emptyState.classList.remove('hidden');
        return;
      }
      
      emptyState.classList.add('hidden');
      
      grid.innerHTML = filtered.map(p => {
        const isFav = favorites.has(p.id);
        return `
          <div class="product-card" onclick="openProductModal('${p.id}')" data-id="${p.id}">
            <div class="product-image-wrap">
              <img class="product-image skeleton" src="${p.img || DEFAULT_IMG}" 
                   alt="" loading="lazy" onload="this.classList.remove('skeleton')">
              <button class="fav-btn ${isFav ? 'active' : ''}" 
                      onclick="event.stopPropagation(); toggleFavorite('${p.id}')">
                ${isFav ? '‚ô•' : '‚ô°'}
              </button>
              <button class="quick-add" onclick="event.stopPropagation(); quickAdd('${p.id}')">
                +
              </button>
            </div>
            <div class="product-info">
              <div class="product-name">${p.name}</div>
              <div class="product-price">
                ${getPriceText(p)}
                ${p.pricePerKg ? '<span class="product-unit">/ –∫–≥</span>' : ''}
              </div>
            </div>
          </div>
        `;
      }).join('');
    }
    
    // ===== –î–ï–ô–°–¢–í–ò–Ø =====
    function setCategory(id) {
      currentCategory = id;
      renderCategories();
      renderProducts();
      if (HAPTIC_ENABLED) window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('light');
    }
    
    function toggleFavorite(id) {
      if (favorites.has(id)) {
        favorites.delete(id);
        showToast('–£–¥–∞–ª–µ–Ω–æ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ');
      } else {
        favorites.add(id);
        showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ');
      }
      saveState();
      renderProducts();
      updateBadges();
      if (HAPTIC_ENABLED) window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('medium');
    }
    
    function quickAdd(id) {
      // –ë—ã—Å—Ç—Ä–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –≤–µ—Å–æ–º
      const product = PRODUCTS.find(p => p.id === id);
      if (!product) return;
      
      let variant = '200 –≥';
      const rule = VARIANT_RULES[id];
      
      if (rule) {
        if (rule.type === 'fixed') {
          variant = rule.options[0];
        } else if (rule.type === 'weight') {
          variant = `${rule.min} ${rule.unit}`;
        }
      } else if (product.pricePerL) {
        variant = '1 –ª';
      } else if (product.pricePerUnit) {
        variant = '1 —à—Ç';
      }
      
      addToCart(id, variant, 1);
      animateFlyToCart(event.target);
    }
    
    function openProductModal(id) {
      const product = PRODUCTS.find(p => p.id === id);
      if (!product) return;
      
      currentProduct = product;
      selectedVariantIndex = 0;
      
      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ç–æ–≤–∞—Ä –∫–æ–º–±–æ (—Å –≤–∞—Ä–∏–∞–Ω—Ç–∞–º–∏)
      if (product.isCombo && PRODUCT_VARIANTS[product.comboKey]) {
        currentVariant = PRODUCT_VARIANTS[product.comboKey];
        renderVariantTabs();
      } else {
        currentVariant = null;
        document.getElementById('variants-section').classList.add('hidden');
      }
      
      updateModalContent();
      document.getElementById('product-modal').classList.add('active');
      document.body.style.overflow = 'hidden';
      
      if (HAPTIC_ENABLED) window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('medium');
    }
    
    function renderVariantTabs() {
      if (!currentVariant) return;
      
      const section = document.getElementById('variants-section');
      const tabs = document.getElementById('variant-tabs');
      
      section.classList.remove('hidden');
      tabs.innerHTML = currentVariant.variants.map((v, i) => `
        <button class="variant-tab ${i === selectedVariantIndex ? 'active' : ''}" 
                onclick="selectVariant(${i})">
          ${v.name}
        </button>
      `).join('');
    }
    
    function selectVariant(index) {
      selectedVariantIndex = index;
      renderVariantTabs();
      updateModalContent();
      if (HAPTIC_ENABLED) window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('light');
    }
    
    function updateModalContent() {
      if (!currentProduct) return;
      
      const variant = currentVariant?.variants?.[selectedVariantIndex];
      const displayProduct = variant || currentProduct;
      
      document.getElementById('modal-image').src = displayProduct.img || currentProduct.img || DEFAULT_IMG;
      document.getElementById('modal-title').textContent = currentProduct.name;
      document.getElementById('modal-description').textContent = currentProduct.description;
      
      // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ
      const favBtn = document.getElementById('modal-fav-btn');
      const isFav = favorites.has(currentProduct.id);
      favBtn.classList.toggle('active', isFav);
      favBtn.textContent = isFav ? '‚ô•' : '‚ô°';
      
      // –†–µ–Ω–¥–µ—Ä–∏–º —Ç–∞–±–ª–µ—Ç–∫–∏ –≤–µ—Å–∞
      renderWeightPills();
      
      // –û–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É
      updateModalPrice();
    }
    
    function renderWeightPills() {
      const container = document.getElementById('weight-pills');
      const customSection = document.getElementById('custom-weight-section');
      const rule = VARIANT_RULES[currentProduct.id];
      
      container.innerHTML = '';
      
      if (rule) {
        if (rule.type === 'fixed') {
          customSection.classList.add('hidden');
          rule.options.forEach((opt, i) => {
            const pill = document.createElement('button');
            pill.className = `weight-pill ${i === 0 ? 'active' : ''}`;
            pill.textContent = opt;
            pill.onclick = () => selectWeightPill(pill, opt);
            container.appendChild(pill);
          });
        } else if (rule.type === 'weight') {
          // –í–µ—Å–æ–≤—ã–µ —Ç–æ–≤–∞—Ä—ã - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–∞–±–ª–µ—Ç–∫–∏ + —Å–ª–∞–π–¥–µ—Ä
          const weights = [];
          for (let g = rule.min; g <= Math.min(rule.max, 1000); g += rule.step) {
            weights.push(g);
          }
          
          weights.forEach((g, i) => {
            const pill = document.createElement('button');
            pill.className = `weight-pill ${g === selectedWeight ? 'active' : ''}`;
            pill.textContent = `${g} –≥`;
            pill.onclick = () => {
              selectedWeight = g;
              renderWeightPills();
              updateModalPrice();
            };
            container.appendChild(pill);
          });
          
          // –°–ª–∞–π–¥–µ—Ä –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –≤–µ—Å–∞
          customSection.classList.remove('hidden');
          const slider = document.getElementById('weight-slider');
          const input = document.getElementById('weight-input');
          
          slider.min = rule.min;
          slider.max = Math.min(rule.max, 1000);
          slider.step = rule.step;
          slider.value = selectedWeight;
          input.value = selectedWeight;
          
          slider.oninput = (e) => {
            selectedWeight = parseInt(e.target.value);
            input.value = selectedWeight;
            updateModalPrice();
          };
          
          input.oninput = (e) => {
            let val = parseInt(e.target.value) || rule.min;
            val = Math.max(rule.min, Math.min(Math.min(rule.max, 1000), val));
            selectedWeight = val;
            slider.value = val;
            updateModalPrice();
          };
        }
      } else {
        // –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã
        customSection.classList.add('hidden');
        if (currentProduct.pricePerKg) {
          [200, 400, 600, 800, 1000].forEach((g, i) => {
            const pill = document.createElement('button');
            pill.className = `weight-pill ${g === selectedWeight ? 'active' : ''}`;
            pill.textContent = `${g} –≥`;
            pill.onclick = () => {
              selectedWeight = g;
              renderWeightPills();
              updateModalPrice();
            };
            container.appendChild(pill);
          });
        } else if (currentProduct.pricePerL) {
          ['0.5 –ª', '1 –ª'].forEach((opt, i) => {
            const pill = document.createElement('button');
            pill.className = `weight-pill ${i === 0 ? 'active' : ''}`;
            pill.textContent = opt;
            pill.onclick = () => selectWeightPill(pill, opt);
            container.appendChild(pill);
          });
        } else if (currentProduct.pricePerUnit) {
          const pill = document.createElement('button');
          pill.className = 'weight-pill active';
          pill.textContent = '1 —à—Ç';
          container.appendChild(pill);
        }
      }
    }
    
    function selectWeightPill(pill, value) {
      document.querySelectorAll('.weight-pill').forEach(p => p.classList.remove('active'));
      pill.classList.add('active');
      updateModalPrice();
    }
    
    function getSelectedVariant() {
      const activePill = document.querySelector('.weight-pill.active');
      if (activePill) {
        const text = activePill.textContent;
        if (text.includes('–≥') || text.includes('–ª') || text.includes('—à—Ç')) {
          return text;
        }
      }
      return `${selectedWeight} –≥`;
    }
    
    function updateModalPrice() {
      const variant = getSelectedVariant();
      const qty = 1;
      const price = calculatePrice(currentProduct.id, variant, qty);
      
      document.getElementById('modal-price').textContent = formatPrice(price.finalPrice);
      
      const oldPriceEl = document.getElementById('modal-old-price');
      const discountEl = document.getElementById('modal-discount');
      
      if (price.discountRate > 0) {
        oldPriceEl.textContent = formatPrice(price.basePrice);
        oldPriceEl.classList.remove('hidden');
        discountEl.textContent = `‚àí${Math.round(price.discountRate * 100)}%`;
        discountEl.classList.remove('hidden');
      } else {
        oldPriceEl.classList.add('hidden');
        discountEl.classList.add('hidden');
      }
    }
    
    function closeProductModal() {
      document.getElementById('product-modal').classList.remove('active');
      document.body.style.overflow = '';
      currentProduct = null;
    }
    
    function toggleModalFavorite() {
      if (currentProduct) {
        toggleFavorite(currentProduct.id);
        const favBtn = document.getElementById('modal-fav-btn');
        const isFav = favorites.has(currentProduct.id);
        favBtn.classList.toggle('active', isFav);
        favBtn.textContent = isFav ? '‚ô•' : '‚ô°';
      }
    }
    
    function addToCartFromModal() {
      if (!currentProduct) return;
      
      const variant = getSelectedVariant();
      const variantData = currentVariant?.variants?.[selectedVariantIndex];
      const productId = variantData ? variantData.id : currentProduct.id;
      const productName = variantData ? `${currentProduct.name} (${variantData.name})` : currentProduct.name;
      
      addToCart(productId, variant, 1, productName);
      closeProductModal();
    }
    
    function addToCart(id, variant, qty, customName = null) {
      const existing = cart.find(item => item.id === id && item.variant === variant);
      
      if (existing) {
        existing.qty += qty;
      } else {
        const product = PRODUCTS.find(p => p.id === id) || 
                       Object.values(PRODUCT_VARIANTS).flatMap(v => v.variants).find(v => v.id === id);
        cart.push({
          id,
          name: customName || product?.name || id,
          variant,
          qty,
          group: product?.group || 'other'
        });
      }
      
      saveState();
      updateBadges();
      showToast('–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–æ—Ä–∑–∏–Ω—É');
      
      if (HAPTIC_ENABLED) window.Telegram?.WebApp?.HapticFeedback?.impactOccurred?.('medium');
    }
    
    // ===== –ö–û–†–ó–ò–ù–ê =====
    function openCart() {
      renderCart();
      document.getElementById('cart-sheet').classList.add('active');
      document.body.style.overflow = 'hidden';
    }
    
    function closeCart() {
      document.getElementById('cart-sheet').classList.remove('active');
      document.body.style.overflow = '';
    }
    
    function renderCart() {
      const container = document.getElementById('cart-items');
      
      if (cart.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üõí</div>
            <div class="empty-title">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
            <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞</p>
          </div>
        `;
        document.getElementById('cart-summary').innerHTML = '';
        return;
      }
      
      container.innerHTML = cart.map((item, index) => {
        const price = calculatePrice(item.id, item.variant, item.qty);
        const product = PRODUCTS.find(p => p.id === item.id) || 
                       Object.values(PRODUCT_VARIANTS).flatMap(v => v.variants).find(v => v.id === item.id);
        
        return `
          <div class="cart-item">
            <img class="cart-item-image" src="${product?.img || DEFAULT_IMG}" alt="">
            <div class="cart-item-info">
              <div class="cart-item-name">${item.name}</div>
              <div class="cart-item-variant">${item.variant}</div>
              <div class="cart-item-price">${formatPrice(price.finalPrice)}</div>
            </div>
            <div class="cart-item-controls">
              <button class="qty-btn" onclick="changeQty(${index}, -1)">‚àí</button>
              <span>${item.qty}</span>
              <button class="qty-btn" onclick="changeQty(${index}, 1)">+</button>
            </div>
          </div>
        `;
      }).join('');
      
      // –°–≤–æ–¥–∫–∞
      let total = 0;
      let baseTotal = 0;
      cart.forEach(item => {
        const price = calculatePrice(item.id, item.variant, item.qty);
        total += price.finalPrice;
        baseTotal += price.basePrice;
      });
      
      const discount = baseTotal - total;
      
      document.getElementById('cart-summary').innerHTML = `
        <div class="summary-row">
          <span>–°—É–º–º–∞</span>
          <span>${formatPrice(baseTotal)}</span>
        </div>
        ${discount > 0 ? `
          <div class="summary-row discount">
            <span>–°–∫–∏–¥–∫–∞</span>
            <span>‚àí${formatPrice(discount)}</span>
          </div>
        ` : ''}
        <div class="summary-row total">
          <span>–ò—Ç–æ–≥–æ</span>
          <span>${formatPrice(total)}</span>
        </div>
      `;
      
      // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
      document.getElementById('checkout-phone').value = checkoutState.phone;
      document.getElementById('checkout-address').value = checkoutState.address;
      document.getElementById('checkout-comment').value = checkoutState.comment;
      document.getElementById('checkout-promo').value = checkoutState.promo;
      document.getElementById('checkout-city').value = checkoutState.city;
    }
    
    function changeQty(index, delta) {
      cart[index].qty += delta;
      if (cart[index].qty <= 0) {
        cart.splice(index, 1);
      }
      saveState();
      renderCart();
      updateBadges();
    }
    
    // ===== –û–§–û–†–ú–õ–ï–ù–ò–ï –ó–ê–ö–ê–ó–ê =====
    function submitOrder() {
      if (cart.length === 0) return;
      
      const phone = document.getElementById('checkout-phone').value.trim();
      const address = document.getElementById('checkout-address').value.trim();
      const comment = document.getElementById('checkout-comment').value.trim();
      const promo = document.getElementById('checkout-promo').value.trim().toUpperCase();
      const city = document.getElementById('checkout-city').value;
      
      checkoutState = { phone, address, comment, promo, city };
      saveState();
      
      if (!phone) {
        showToast('–£–∫–∞–∂–∏—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω');
        return;
      }
      if (!address) {
        showToast('–£–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å');
        return;
      }
      
      showLoader('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–∫–∞–∑...');
      
      const payload = {
        type: 'cart',
        source: 'miniapp',
        currency: CURRENCY,
        items: cart.map(item => {
          const price = calculatePrice(item.id, item.variant, item.qty);
          return {
            id: item.id,
            name: item.name,
            variant: item.variant,
            qty: item.qty,
            price: price.finalPrice / item.qty,
            total: price.finalPrice
          };
        }),
        total: cart.reduce((sum, item) => sum + calculatePrice(item.id, item.variant, item.qty).finalPrice, 0),
        contact: { phone, address, comment, promo, city },
        timestamp: Date.now()
      };
      
      if (window.Telegram?.WebApp?.initDataUnsafe?.user) {
        payload.user = window.Telegram.WebApp.initDataUnsafe.user;
      }
      
      // –û—Ç–ø—Ä–∞–≤–∫–∞
      if (typeof axios !== 'undefined') {
        axios.post(`${BACKEND}/order`, payload)
          .then(() => {
            hideLoader();
            showToast('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!');
            cart = [];
            saveState();
            updateBadges();
            closeCart();
            setTimeout(() => {
              window.Telegram?.WebApp?.close?.();
            }, 1500);
          })
          .catch(err => {
            hideLoader();
            showToast('–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.');
            console.error(err);
          });
      } else {
        // –î–µ–º–æ —Ä–µ–∂–∏–º
        setTimeout(() => {
          hideLoader();
          showToast('–ó–∞–∫–∞–∑ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! (–¥–µ–º–æ)');
          console.log('ORDER:', payload);
          cart = [];
          saveState();
          updateBadges();
          closeCart();
        }, 1500);
      }
    }
    
    // ===== –£–¢–ò–õ–ò–¢–´ =====
    function calculatePrice(productId, variant, qty) {
      // –ò—â–µ–º –ø—Ä–æ–¥—É–∫—Ç –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–ø–∏—Å–∫–µ –∏–ª–∏ –≤ –≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö
      let product = PRODUCTS.find(p => p.id === productId);
      if (!product) {
        // –ò—â–µ–º –≤ –∫–æ–º–±–æ-–≤–∞—Ä–∏–∞–Ω—Ç–∞—Ö
        for (const combo of Object.values(PRODUCT_VARIANTS)) {
          const variantProduct = combo.variants.find(v => v.id === productId);
          if (variantProduct) {
            product = { ...combo, ...variantProduct };
            break;
          }
        }
      }
      
      if (!product) return { basePrice: 0, finalPrice: 0, discountRate: 0 };
      
      let base = 0;
      
      if (product.pricePerKg) {
        const grams = extractGrams(variant) || 200;
        base = (grams / 1000) * product.pricePerKg * qty;
      } else if (product.pricePerL) {
        const liters = extractLiters(variant) || 1;
        base = liters * product.pricePerL * qty;
      } else if (product.pricePerUnit) {
        base = product.pricePerUnit * qty;
      }
      
      // –°–∫–∏–¥–∫–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—ã—Ä–æ–≤
      let discountRate = 0;
      if (CHEESE_GROUP_IDS.has(product.group)) {
        const totalGrams = cart
          .filter(i => i.id === productId)
          .reduce((sum, i) => sum + (extractGrams(i.variant) || 0) * i.qty, 0);
        
        for (const threshold of DISCOUNT_THRESHOLDS) {
          if (totalGrams >= threshold.g) discountRate = threshold.rate;
        }
      }
      
      return {
        basePrice: Math.round(base),
        finalPrice: Math.round(base * (1 - discountRate)),
        discountRate
      };
    }
    
    function extractGrams(variant) {
      const match = variant.match(/(\d+)\s*–≥/);
      return match ? parseInt(match[1]) : 0;
    }
    
    function extractLiters(variant) {
      const match = variant.match(/(\d+(?:\.\d+)?)\s*–ª/);
      return match ? parseFloat(match[1]) : 0;
    }
    
    function getPriceText(product) {
      if (product.pricePerKg) return formatPrice(product.pricePerKg);
      if (product.pricePerL) return formatPrice(product.pricePerL);
      if (product.pricePerUnit) return formatPrice(product.pricePerUnit);
      return '–¶–µ–Ω–∞ –Ω–µ —É–∫–∞–∑–∞–Ω–∞';
    }
    
    function formatPrice(price) {
      return new Intl.NumberFormat('ru-RU').format(price) + ' ‚ÇΩ';
    }
    
    function updateBadges() {
      const cartCount = cart.reduce((sum, item) => sum + item.qty, 0);
      const cartBadge = document.getElementById('cart-badge');
      const favBadge = document.getElementById('fav-badge');
      
      cartBadge.textContent = cartCount;
      cartBadge.classList.toggle('hidden', cartCount === 0);
      
      favBadge.textContent = favorites.size;
      favBadge.classList.toggle('hidden', favorites.size === 0);
    }
    
    function updateUI() {
      updateBadges();
    }
    
    function showToast(message) {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = 'toast';
      toast.textContent = message;
      container.appendChild(toast);
      
      setTimeout(() => toast.classList.add('show'), 10);
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => toast.remove(), 300);
      }, 2500);
    }
    
    function showLoader(text = '–ó–∞–≥—Ä—É–∑–∫–∞...') {
      document.getElementById('loader-text').textContent = text;
      document.getElementById('loader').classList.add('active');
    }
    
    function hideLoader() {
      document.getElementById('loader').classList.remove('active');
    }
    
    function animateFlyToCart(element) {
      const rect = element.getBoundingClientRect();
      const cartBtn = document.querySelector('.nav-item[onclick="openCart()"]');
      const cartRect = cartBtn.getBoundingClientRect();
      
      const flyer = document.createElement('div');
      flyer.className = 'flying-item';
      flyer.style.left = rect.left + 'px';
      flyer.style.top = rect.top + 'px';
      flyer.style.setProperty('--cart-x', (cartRect.left - rect.left) + 'px');
      flyer.style.setProperty('--cart-y', (cartRect.top - rect.top) + 'px');
      
      document.body.appendChild(flyer);
      setTimeout(() => flyer.remove(), 600);
    }
    
    // ===== –ù–ê–í–ò–ì–ê–¶–ò–Ø =====
    function showHome() {
      currentCategory = 'all';
      document.getElementById('search-input').value = '';
      renderCategories();
      renderProducts();
      document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
      document.querySelector('.nav-item[onclick="showHome()"]').classList.add('active');
    }
    
    function showFavorites() {
      const favProducts = PRODUCTS.filter(p => favorites.has(p.id));
      const grid = document.getElementById('products-grid');
      const hitsSection = document.getElementById('hits-section');
      const categoriesSection = document.getElementById('categories-section');
      const emptyState = document.getElementById('empty-state');
      
      hitsSection.classList.add('hidden');
      categoriesSection.classList.add('hidden');
      
      if (favProducts.length === 0) {
        grid.innerHTML = '';
        emptyState.innerHTML = `
          <div class="empty-icon">‚ô°</div>
          <div class="empty-title">–ù–µ—Ç –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ</div>
          <p>–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä—ã –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</p>
        `;
        emptyState.classList.remove('hidden');
      } else {
        emptyState.classList.add('hidden');
        grid.innerHTML = favProducts.map(p => {
          const isFav = favorites.has(p.id);
          return `
            <div class="product-card" onclick="openProductModal('${p.id}')" data-id="${p.id}">
              <div class="product-image-wrap">
                <img class="product-image" src="${p.img || DEFAULT_IMG}" alt="" loading="lazy">
                <button class="fav-btn ${isFav ? 'active' : ''}" 
                        onclick="event.stopPropagation(); toggleFavorite('${p.id}')">
                  ${isFav ? '‚ô•' : '‚ô°'}
                </button>
                <button class="quick-add" onclick="event.stopPropagation(); quickAdd('${p.id}')">
                  +
                </button>
              </div>
              <div class="product-info">
                <div class="product-name">${p.name}</div>
                <div class="product-price">${getPriceText(p)}</div>
              </div>
            </div>
          `;
        }).join('');
      }
      
      document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
      document.querySelector('.nav-item[onclick="showFavorites()"]').classList.add('active');
    }
    
    function showProfile() {
      showToast('–ü—Ä–æ—Ñ–∏–ª—å –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ');
    }
    
    // ===== –°–û–ë–´–¢–ò–Ø =====
    function setupEventListeners() {
      // –ü–æ–∏—Å–∫
      document.getElementById('search-input').addEventListener('input', () => {
        renderProducts();
      });
      
      // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–æ–¥–∞–ª–æ–∫ –ø–æ Escape
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeProductModal();
          closeCart();
        }
      });
      
      // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ñ–æ—Ä–º—ã
      ['checkout-phone', 'checkout-address', 'checkout-comment', 'checkout-promo'].forEach(id => {
        document.getElementById(id)?.addEventListener('input', (e) => {
          checkoutState[id.replace('checkout-', '')] = e.target.value;
          saveState();
        });
      });
      
      document.getElementById('checkout-city')?.addEventListener('change', (e) => {
        checkoutState.city = e.target.value;
        saveState();
      });
    }
  </script>
</body>
</html>
